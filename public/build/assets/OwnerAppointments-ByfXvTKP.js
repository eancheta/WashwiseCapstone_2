import{d as P,r as x,b as S,c as n,o as a,l as B,a as t,u as N,m as V,g as m,e as c,h as W,i as M,v as _,F as h,j as T,W as y,t as r}from"./app-DhSMx4Bu.js";const $={class:"min-h-screen bg-gray-100"},E={class:"py-6 max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white shadow-md rounded-lg p-6"},j={class:"mb-4 flex items-center space-x-4"},U={key:0,class:"flex items-center space-x-2"},z={class:"overflow-x-auto"},I={class:"min-w-full bg-white border rounded-lg shadow"},Y={class:"px-4 py-3"},L={class:"px-4 py-3"},O={class:"px-4 py-3"},R={class:"px-4 py-3"},q={class:"px-4 py-3"},G={class:"px-4 py-3"},H={class:"px-4 py-3"},J={class:"px-4 py-3 text-center"},K=["src"],Q={key:1,class:"text-gray-400 italic"},X={class:"px-4 py-3"},Z={class:"px-4 py-3"},tt={key:0,class:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full"},et={key:1,class:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full"},st={key:2,class:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full"},ot={key:3,class:"px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full"},nt={key:4,class:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full"},at={class:"px-4 py-3 text-center space-x-2"},lt=["onClick"],rt=["onClick"],dt={key:0},pt=P({__name:"OwnerAppointments",props:{appointments:{}},setup(b){const v=b;function w(o){y.post(`/owner/appointments/${o}/approve`)}function k(o){y.post(`/owner/appointments/${o}/decline`)}function D(o){return o.payment_proof?o.payment_proof.startsWith("http")||o.payment_proof.startsWith("/storage/")?o.payment_proof:`/storage/${o.payment_proof}`:"/images/no-proof.png"}function C(o){const s=o.target;s.src="/images/no-proof.png"}const d=x("all"),i=x(""),p=x(""),g=S(()=>{let o=[...v.appointments];const s=new Date;let e=null,l=null;if(d.value==="today")e=new Date(s.toDateString()),l=new Date(e),l.setDate(l.getDate()+1);else if(d.value==="week"){const u=s.getDate()-s.getDay();e=new Date(s.setDate(u)),l=new Date(s.setDate(u+7))}else d.value==="month"?(e=new Date(s.getFullYear(),s.getMonth(),1),l=new Date(s.getFullYear(),s.getMonth()+1,1)):d.value==="custom"&&i.value&&p.value&&(e=new Date(i.value),l=new Date(p.value),l.setDate(l.getDate()+1));return e&&l&&(o=o.filter(u=>{const f=new Date(u.date_of_booking);return f>=e&&f<l})),o});function A(){y.visit("/owner/dashboard")}return(o,s)=>(a(),n(h,null,[B(N(V),{title:"Appointments"}),t("div",$,[t("div",{class:"bg-white shadow"},[t("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},[s[3]||(s[3]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Appointments",-1)),t("button",{onClick:A,class:"px-4 py-2 bg-gray-700 text-white rounded-lg shadow hover:bg-gray-800"}," Back to Dashboard ")])]),t("div",E,[t("div",F,[t("div",j,[m(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"border rounded p-2"},[...s[4]||(s[4]=[M('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[W,d.value]]),d.value==="custom"?(a(),n("div",U,[m(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),class:"border rounded p-2"},null,512),[[_,i.value]]),s[5]||(s[5]=t("span",null,"to",-1)),m(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>p.value=e),class:"border rounded p-2"},null,512),[[_,p.value]])])):c("",!0)]),t("div",z,[t("table",I,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b"},[t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Name"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Car Size"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Contact"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Email"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Booking Time"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Booking Date"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Slot"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Payment Proof"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Amount"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Status"),t("th",{class:"px-4 py-3 text-center text-sm font-medium text-gray-600"},"Actions")])],-1)),t("tbody",null,[(a(!0),n(h,null,T(g.value,e=>(a(),n("tr",{key:e.id,class:"border-b hover:bg-gray-50"},[t("td",Y,r(e.name),1),t("td",L,r(e.size_of_the_car),1),t("td",O,r(e.contact_no),1),t("td",R,r(e.email),1),t("td",q,r(e.time_of_booking),1),t("td",G,r(e.date_of_booking),1),t("td",H,r(e.slot_number),1),t("td",J,[e.payment_proof?(a(),n("img",{key:0,src:D(e),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded border mx-auto",onError:C},null,40,K)):(a(),n("span",Q,"Walk_IN"))]),t("td",X,r(e.payment_amount??"-"),1),t("td",Z,[e.status==="pending"?(a(),n("span",tt," Pending ")):e.status==="approved"?(a(),n("span",et," Approved ")):e.status==="declined"?(a(),n("span",st," Declined ")):e.status==="paid"?(a(),n("span",ot," Paid ")):(a(),n("span",nt,r(e.status),1))]),t("td",at,[e.status==="pending"?(a(),n("button",{key:0,onClick:l=>w(e.id),class:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700"}," Approve ",8,lt)):c("",!0),e.status==="pending"?(a(),n("button",{key:1,onClick:l=>k(e.id),class:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700"}," Decline ",8,rt)):c("",!0)])]))),128)),g.value.length===0?(a(),n("tr",dt,[...s[6]||(s[6]=[t("td",{colspan:"11",class:"px-4 py-3 text-center text-gray-500 italic"}," No appointments found ",-1)])])):c("",!0)])])])])])])],64))}});export{pt as default};
