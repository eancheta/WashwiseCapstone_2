import{d as P,r as m,b as S,c as a,o as l,l as B,a as t,u as V,m as N,g as x,e as c,h as M,i as T,v as _,F as h,j as W,W as y,t as r}from"./app-BfX6XKp_.js";const $={class:"min-h-screen bg-gray-100"},j={class:"py-6 max-w-7xl mx-auto sm:px-6 lg:px-8"},E={class:"bg-white shadow-md rounded-lg p-6"},F={class:"mb-4 flex items-center space-x-4"},U={key:0,class:"flex items-center space-x-2"},z={class:"overflow-x-auto"},Y={class:"min-w-full bg-white border rounded-lg shadow"},I={class:"px-4 py-3"},L={class:"px-4 py-3"},O={class:"px-4 py-3"},R={class:"px-4 py-3"},q={class:"px-4 py-3"},G={class:"px-4 py-3"},H={class:"px-4 py-3"},J={class:"px-4 py-3 text-center"},K=["src"],Q={class:"px-4 py-3"},X={class:"px-4 py-3"},Z={key:0,class:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full"},tt={key:1,class:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full"},et={key:2,class:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full"},st={key:3,class:"px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full"},ot={key:4,class:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full"},nt={class:"px-4 py-3 text-center"},at={class:"flex justify-center gap-3"},lt=["onClick"],rt=["onClick"],dt={key:0},ut=P({__name:"OwnerAppointments",props:{appointments:{}},setup(b){const v=b;function w(o){y.post(`/owner/appointments/${o}/approve`)}function D(o){y.post(`/owner/appointments/${o}/decline`)}function k(o){return o.payment_proof?o.payment_proof.startsWith("http")||o.payment_proof.startsWith("/storage/")?o.payment_proof:`/storage/${o.payment_proof}`:"/images/no-proof.png"}function C(o){const s=o.target;s.src="/images/no-proof.png"}const d=m("all"),i=m(""),u=m(""),g=S(()=>{let o=[...v.appointments];const s=new Date;let e=null,n=null;if(d.value==="today")e=new Date(s.toDateString()),n=new Date(e),n.setDate(n.getDate()+1);else if(d.value==="week"){const p=s.getDate()-s.getDay();e=new Date(s.setDate(p)),n=new Date(s.setDate(p+7))}else d.value==="month"?(e=new Date(s.getFullYear(),s.getMonth(),1),n=new Date(s.getFullYear(),s.getMonth()+1,1)):d.value==="custom"&&i.value&&u.value&&(e=new Date(i.value),n=new Date(u.value),n.setDate(n.getDate()+1));return e&&n&&(o=o.filter(p=>{const f=new Date(p.date_of_booking);return f>=e&&f<n})),o});function A(){y.visit("/owner/dashboard")}return(o,s)=>(l(),a(h,null,[B(V(N),{title:"Appointments"}),t("div",$,[t("div",{class:"bg-white shadow"},[t("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},[s[3]||(s[3]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Appointments",-1)),t("button",{onClick:A,class:"px-4 py-2 bg-gray-700 text-white rounded-lg shadow hover:bg-gray-800"}," Back to Dashboard ")])]),t("div",j,[t("div",E,[t("div",F,[x(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),class:"border rounded p-2"},[...s[4]||(s[4]=[T('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[M,d.value]]),d.value==="custom"?(l(),a("div",U,[x(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),class:"border rounded p-2"},null,512),[[_,i.value]]),s[5]||(s[5]=t("span",null,"to",-1)),x(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>u.value=e),class:"border rounded p-2"},null,512),[[_,u.value]])])):c("",!0)]),t("div",z,[t("table",Y,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b"},[t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Name "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Car Size "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Contact "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Email "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Booking Time "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Booking Date "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Slot "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Payment Proof "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Amount "),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"}," Status "),t("th",{class:"px-4 py-3 text-center text-sm font-medium text-gray-600"}," Actions ")])],-1)),t("tbody",null,[(l(!0),a(h,null,W(g.value,e=>(l(),a("tr",{key:e.id,class:"border-b hover:bg-gray-50"},[t("td",I,r(e.name),1),t("td",L,r(e.size_of_the_car),1),t("td",O,r(e.contact_no),1),t("td",R,r(e.email),1),t("td",q,r(e.time_of_booking),1),t("td",G,r(e.date_of_booking),1),t("td",H,r(e.slot_number),1),t("td",J,[t("img",{src:k(e),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded border mx-auto",onError:C},null,40,K)]),t("td",Q,r(e.payment_amount??"-"),1),t("td",X,[e.status==="pending"?(l(),a("span",Z," Pending ")):e.status==="approved"?(l(),a("span",tt," Approved ")):e.status==="declined"?(l(),a("span",et," Declined ")):e.status==="paid"?(l(),a("span",st," Paid ")):(l(),a("span",ot,r(e.status),1))]),t("td",nt,[t("div",at,[e.status==="pending"?(l(),a("button",{key:0,onClick:n=>w(e.id),class:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 shadow-md transition transform hover:-translate-y-0.5"}," Approve ",8,lt)):c("",!0),e.status==="pending"?(l(),a("button",{key:1,onClick:n=>D(e.id),class:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 shadow-md transition transform hover:-translate-y-0.5"}," Decline ",8,rt)):c("",!0)])])]))),128)),g.value.length===0?(l(),a("tr",dt,[...s[6]||(s[6]=[t("td",{colspan:"11",class:"px-4 py-3 text-center text-gray-500 italic"}," No appointments found ",-1)])])):c("",!0)])])])])])])],64))}});export{ut as default};
