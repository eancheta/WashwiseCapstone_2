import{d as I,r as d,b as M,c as a,o as r,l as W,a as e,e as g,u as E,m as U,g as b,h as R,s as O,v as h,F as w,i as C,W as y,t as l,n as P}from"./app-DhY5DN0Y.js";const Y={class:"min-h-screen bg-gradient-to-br from-[#001F3F] via-[#003366] to-[#00509E] py-10 px-6 flex flex-col items-center text-white"},L={class:"w-full max-w-7xl bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 p-10 relative overflow-hidden"},q={class:"mb-10 grid grid-cols-1 sm:grid-cols-3 gap-6 bg-white/10 p-6 rounded-2xl shadow-md border border-white/20 backdrop-blur-sm"},G={key:0},H={key:1},J={key:0,class:"text-gray-100 text-xl text-center py-20 font-medium"},K={key:1,class:"overflow-x-auto rounded-2xl border border-white/20 shadow-xl backdrop-blur-sm"},Q={class:"w-full text-sm md:text-base border-collapse"},X={class:"bg-gradient-to-r from-[#FF2D2D] to-[#FF6B6B] text-white uppercase"},Z={class:"px-5 py-4"},ee={class:"px-5 py-4"},te={class:"px-5 py-4"},oe={class:"px-5 py-4 text-center"},se={class:"px-5 py-4"},ne={class:"px-5 py-4"},le={class:"px-5 py-4"},ae={class:"px-5 py-4"},re={class:"px-5 py-4"},ie={class:"px-5 py-4"},de={class:"px-5 py-4 text-center"},ue=["src","onClick"],ce={class:"px-5 py-4 text-center font-bold text-[#FFD700]"},me={class:"px-5 py-4 text-center flex justify-center gap-3"},xe=["onClick"],pe=["onClick"],ge={key:0,class:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50"},be={class:"bg-white w-full max-w-md rounded-2xl shadow-2xl p-6 relative"},fe={class:"mt-6 flex justify-end gap-3"},ve={key:1,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},he=["src"],ye=I({__name:"OwnerAppointments",props:{appointments:{}},setup(B){const S=B;function A(s){y.post(`/owner/appointments/${s}/approve`)}const c=d(!1),m=d(""),f=d(null);function z(s){f.value=s,c.value=!0}function N(){f.value&&(y.post(`/owner/appointments/${f.value}/decline`,{reason:m.value}),c.value=!1,m.value="")}function _(s){return s.payment_proof?s.payment_proof.startsWith("http")||s.payment_proof.startsWith("/storage/")?s.payment_proof:`/storage/${s.payment_proof}`:"/images/hero-carwash.jpg"}function T(s){const o=s.target;o.src="/images/hero-carwash.jpg"}const v=d(!1),D=d("");function V(s){D.value=s,v.value=!0}const i=d("all"),x=d(""),p=d(""),k=M(()=>{let s=[...S.appointments];const o=new Date;let t=null,n=null;if(i.value==="today")t=new Date(o.toDateString()),n=new Date(t),n.setDate(n.getDate()+1);else if(i.value==="week"){const u=o.getDate()-o.getDay();t=new Date(o.setDate(u)),n=new Date(o.setDate(u+7))}else i.value==="month"?(t=new Date(o.getFullYear(),o.getMonth(),1),n=new Date(o.getFullYear(),o.getMonth()+1,1)):i.value==="custom"&&x.value&&p.value&&(t=new Date(x.value),n=new Date(p.value),n.setDate(n.getDate()+1));return t&&n&&(s=s.filter(u=>{const F=new Date(u.date_of_booking);return F>=t&&F<n})),s});function $(){y.visit("/owner/dashboard")}const j=[{text:"Date",value:"date_of_booking"},{text:"Time",value:"time_of_booking"},{text:"Status",value:"status"},{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Car Size",value:"size_of_the_car"},{text:"Contact",value:"contact_no"},{text:"Slot",value:"slot_number"},{text:"Created",value:"created_at"},{text:"Payment Proof",value:"payment_proof"},{text:"Amount",value:"payment_amount"},{text:"Actions",value:"actions"}];return(s,o)=>(r(),a(w,null,[W(E(U),{title:"Owner Appointments"}),e("div",Y,[e("div",L,[o[10]||(o[10]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-[#FF2D2D]/20 via-transparent to-[#FF6B6B]/20 blur-3xl"},null,-1)),e("div",{class:"absolute top-6 left-6 z-10"},[e("button",{onClick:$,class:"px-5 py-2 bg-white/20 text-white font-semibold rounded-xl shadow-lg hover:bg-white/30 border border-white/30 transition-all hover:scale-105 backdrop-blur-md"}," â† Back ")]),o[11]||(o[11]=e("div",{class:"text-center mb-12 relative z-10"},[e("h1",{class:"text-5xl font-extrabold drop-shadow-lg text-white tracking-wide"}," Customer Appointments âœ¨ "),e("p",{class:"text-gray-200 mt-2"},"Track and manage all bookings with clarity and style.")],-1)),e("div",q,[e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm font-semibold text-gray-200 mb-1"},"Date Range",-1)),b(e("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>i.value=t),class:"w-full px-4 py-3 rounded-lg text-[#001F3F] font-semibold focus:ring-4 focus:ring-[#FF2D2D]/60 outline-none"},[...o[6]||(o[6]=[O('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[R,i.value]])]),i.value==="custom"?(r(),a("div",G,[o[8]||(o[8]=e("label",{class:"block text-sm font-semibold text-gray-200 mb-1"},"From",-1)),b(e("input",{type:"date","onUpdate:modelValue":o[1]||(o[1]=t=>x.value=t),class:"w-full px-4 py-3 rounded-lg text-[#001F3F] font-semibold focus:ring-4 focus:ring-[#FF2D2D]/60 outline-none"},null,512),[[h,x.value]])])):g("",!0),i.value==="custom"?(r(),a("div",H,[o[9]||(o[9]=e("label",{class:"block text-sm font-semibold text-gray-200 mb-1"},"To",-1)),b(e("input",{type:"date","onUpdate:modelValue":o[2]||(o[2]=t=>p.value=t),class:"w-full px-4 py-3 rounded-lg text-[#001F3F] font-semibold focus:ring-4 focus:ring-[#FF2D2D]/60 outline-none"},null,512),[[h,p.value]])])):g("",!0)]),k.value.length===0?(r(),a("div",J," ðŸš« No appointments found for this range. ")):(r(),a("div",K,[e("table",Q,[e("thead",X,[e("tr",null,[(r(),a(w,null,C(j,t=>e("th",{key:t.value,class:"px-5 py-4 text-left font-semibold tracking-wider"},l(t.text),1)),64))])]),e("tbody",null,[(r(!0),a(w,null,C(k.value,(t,n)=>(r(),a("tr",{key:t.id,class:P([n%2===0?"bg-white/10 hover:bg-white/20":"bg-white/5 hover:bg-white/15","transition-all text-white"])},[e("td",Z,l(t.date_of_booking),1),e("td",ee,l(t.time_of_booking),1),e("td",te,[e("span",{class:P({"bg-green-600/80 text-white px-3 py-1 rounded-full text-sm font-semibold":t.status==="approved","bg-red-600/80 text-white px-3 py-1 rounded-full text-sm font-semibold":t.status==="declined","bg-gray-400/70 text-white px-3 py-1 rounded-full text-sm font-semibold":!t.status||t.status==="pending"})},l(t.status??"Pending"),3)]),e("td",oe,l(t.id),1),e("td",se,l(t.name),1),e("td",ne,l(t.email||"Walk-IN"),1),e("td",le,l(t.size_of_the_car),1),e("td",ae,l(t.contact_no),1),e("td",re,l(t.slot_number),1),e("td",ie,l(t.created_at),1),e("td",de,[e("img",{src:_(t),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded-lg border border-white/30 mx-auto cursor-pointer hover:scale-105 transition-all",onClick:u=>V(_(t)),onError:T},null,40,ue)]),e("td",ce,l(t.payment_amount??"Walk-IN"),1),e("td",me,[e("button",{onClick:u=>A(t.id),class:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white font-semibold shadow-md transition hover:scale-105"}," âœ… Approve ",8,xe),e("button",{onClick:u=>z(t.id),class:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-white font-semibold shadow-md transition hover:scale-105"}," âŒ Decline ",8,pe)])],2))),128))])])]))])]),c.value?(r(),a("div",ge,[e("div",be,[o[12]||(o[12]=e("h2",{class:"text-2xl font-bold text-[#002B5C] mb-4"},"Decline Appointment",-1)),o[13]||(o[13]=e("p",{class:"text-gray-600 mb-3"},"Please provide a reason for declining:",-1)),b(e("textarea",{"onUpdate:modelValue":o[3]||(o[3]=t=>m.value=t),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[h,m.value]]),e("div",fe,[e("button",{onClick:o[4]||(o[4]=t=>c.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),e("button",{onClick:N,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):g("",!0),v.value?(r(),a("div",ve,[e("img",{src:D.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,he),e("button",{onClick:o[5]||(o[5]=t=>v.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold hover:text-red-400"},"âœ•")])):g("",!0)],64))}});export{ye as default};
