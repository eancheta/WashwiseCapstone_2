import{d as R,r,a as l,o as i,e as t,b as x,n as F,j as S,f as q,t as n,F as c,i as _,g as M,v as V,W as u,A as m}from"./app-CeACqLyK.js";const G={class:"min-h-screen flex flex-col sm:flex-row bg-gray-50"},H={class:"sm:hidden flex justify-between items-center bg-white shadow px-4 py-3"},J={class:"flex flex-col gap-2"},K={class:"flex-1 p-4 sm:p-8 mt-14 sm:mt-0"},Q={class:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6 text-[#182235]"},X={key:0,class:"overflow-x-auto bg-white rounded-xl shadow border border-gray-200"},Y={class:"min-w-full text-sm sm:text-base"},Z={class:"py-2 px-3"},tt={class:"py-2 px-3"},et=["src","onClick"],st={key:1,class:"text-gray-400 text-xs"},ot={class:"py-2 px-3"},nt={class:"py-2 px-3"},lt={class:"py-2 px-3"},it={class:"py-2 px-3"},at={class:"py-2 px-3"},rt={class:"py-2 px-3"},dt={class:"py-2 px-3"},ct={class:"flex flex-wrap gap-2 justify-center"},ut=["onClick"],pt=["onClick"],xt=["onClick"],mt={key:1,class:"overflow-x-auto bg-white rounded-xl shadow border border-gray-200"},bt={class:"min-w-[1000px] w-full text-xs sm:text-sm"},ht={class:"bg-gray-100 text-[#182235]"},gt={class:"text-[#182235]"},vt={class:"px-2 py-2 text-center"},yt={class:"px-2 py-2"},ft={class:"px-2 py-2"},_t={class:"px-2 py-2"},wt={class:"px-2 py-2"},kt={class:"px-2 py-2"},Ct={class:"px-2 py-2"},Dt={class:"px-2 py-2 text-center"},At=["src","onClick"],Ft={class:"px-2 py-2 text-center"},$t=["src","onClick"],jt={class:"px-2 py-2 text-center"},Pt=["src","onClick"],Nt={class:"px-2 py-2 text-center"},St={class:"px-2 py-2 text-center truncate max-w-[80px]"},Mt={class:"px-2 py-2 text-center"},Vt={class:"px-2 py-2 text-center"},Wt={class:"px-2 py-2 text-center"},Ot={class:"flex flex-wrap gap-2 justify-center"},zt=["onClick"],Bt=["onClick"],It=["onClick"],Tt=["onClick"],Et=["onClick"],Ut={key:0,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},Lt=["src"],Rt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 px-4"},qt={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},Gt={class:"mt-6 flex justify-end gap-3"},Ht={key:2,class:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 px-4"},Jt={class:"bg-white w-full max-w-2xl rounded-2xl shadow-xl p-6 relative"},Kt={class:"text-xl font-bold text-[#002B5C] mb-4"},Qt={key:0,class:"space-y-3 max-h-[60vh] overflow-y-auto"},Xt={class:"flex justify-between items-center"},Yt={class:"font-semibold text-[#182235]"},Zt={class:"text-yellow-500"},te={class:"text-gray-700 mt-1"},ee={key:1,class:"text-gray-500 text-center py-4"},se={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 px-4"},oe={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},ne={class:"mt-6 flex justify-end gap-3"},ae=R({__name:"AdminDashboard",props:{owners:{},users:{}},setup(le){function p(o){return o?o.startsWith("http://")||o.startsWith("https://")?o:`/storage/${o}`:"https://placehold.co/100x100?text=No+Photo"}const W=o=>{confirm("Are you sure you want to delete this account?")&&u.post(m("owners.decline",{id:o}))},O=o=>{confirm("Are you sure you want to delete this account?")&&u.post(m("customers.decline",{id:o}))},d=r("users"),b=r(!1),v=r(!1),h=r(""),w=r(null),z=o=>{confirm("Are you sure you want to approve this owner?")&&u.post(m("owners.approve",{id:o}))},B=o=>{w.value=o,v.value=!0},I=()=>{if(!w.value||!h.value.trim()){alert("Please enter a reason before declining.");return}u.post(m("owners.decline",{id:w.value}),{reason:h.value}),v.value=!1,h.value=""},T=()=>{u.post("/logout")},k=r(!1),$=r("");function y(o){$.value=o,k.value=!0}const C=r(!1),D=r([]),j=r("");function P(o){var s;j.value=o.name,D.value=((s=o.shop)==null?void 0:s.feedback)||[],C.value=!0}const f=r(!1),g=r(""),A=r(null),E=o=>{confirm("Are you sure you want to approve this customer?")&&u.post(m("customers.approve",{id:o}))},U=o=>{A.value=o,f.value=!0},L=()=>{if(!A.value||!g.value.trim()){alert("Please enter a reason before declining.");return}u.post(m("customers.decline",{id:A.value}),{reason:g.value}),f.value=!1,g.value=""};return(o,s)=>(i(),l("div",G,[t("div",H,[s[9]||(s[9]=t("div",{class:"flex items-center gap-2"},[t("img",{src:"/images/washwiselogo2.png",alt:"Logo",class:"h-8 w-auto"}),t("h1",{class:"font-bold text-[#182235]"},"WashWise Admin")],-1)),t("button",{onClick:s[0]||(s[0]=e=>b.value=!b.value),class:"text-[#182235] text-xl"},"☰")]),t("aside",{class:F(["bg-white shadow-lg flex flex-col py-6 px-4 w-64 fixed sm:static inset-y-0 left-0 z-30 transform transition-transform duration-300",b.value?"translate-x-0":"-translate-x-full sm:translate-x-0"])},[s[13]||(s[13]=t("div",{class:"flex flex-col items-center mb-10"},[t("img",{src:"/images/washwiselogo2.png",alt:"WashWise Logo",class:"h-14 w-auto mb-2",draggable:"false"}),t("span",{class:"text-xl font-bold text-[#182235]"},"Admin")],-1)),t("nav",J,[t("button",{class:F(["flex items-center gap-3 px-4 py-2 rounded-lg font-semibold transition",d.value==="users"?"bg-[#FF2D2D] text-white":"text-[#182235] hover:bg-[#f8fafc]"]),onClick:s[1]||(s[1]=e=>{d.value="users",b.value=!1})},[...s[10]||(s[10]=[t("span",null,"👤",-1),S(" Customer Account ",-1)])],2),t("button",{class:F(["flex items-center gap-3 px-4 py-2 rounded-lg font-semibold transition",d.value==="owners"?"bg-[#FF2D2D] text-white":"text-[#182235] hover:bg-[#f8fafc]"]),onClick:s[2]||(s[2]=e=>{d.value="owners",b.value=!1})},[...s[11]||(s[11]=[t("span",null,"🏢",-1),S(" Owners Account ",-1)])],2)]),t("form",{onSubmit:q(T,["prevent"]),class:"mt-auto pt-10"},[...s[12]||(s[12]=[t("button",{class:"w-full bg-[#FF2D2D] hover:bg-[#d72626] text-white px-4 py-2 rounded-lg font-semibold shadow transition"}," Logout ",-1)])],32)],2),t("main",K,[t("h1",Q,n(d.value==="users"?"Customer Account":"Owner Account"),1),d.value==="users"?(i(),l("div",X,[t("table",Y,[s[14]||(s[14]=t("thead",null,[t("tr",{class:"bg-gray-100 text-left text-[#182235]"},[t("th",{class:"py-2 px-3"},"ID"),t("th",{class:"py-2 px-3"},"Picture"),t("th",{class:"py-2 px-3"},"Name"),t("th",{class:"py-2 px-3"},"Email"),t("th",{class:"py-2 px-3"},"Customer Status"),t("th",{class:"py-2 px-3"},"Status"),t("th",{class:"py-2 px-3"},"Created"),t("th",{class:"py-2 px-3"},"Updated"),t("th",{class:"py-2 px-3"},"Actions")])],-1)),t("tbody",null,[(i(!0),l(c,null,_(o.users,e=>(i(),l("tr",{key:e.id,class:"hover:bg-gray-50 border-t text-[#182235] transition"},[t("td",Z,n(e.id),1),t("td",tt,[e.picture_id?(i(),l("img",{key:0,src:e.picture_id,alt:"User Picture",class:"w-10 h-10 object-cover rounded-full border cursor-pointer hover:opacity-80 transition",onClick:a=>y(e.picture_id)},null,8,et)):(i(),l("span",st,"No picture"))]),t("td",ot,n(e.name),1),t("td",nt,n(e.email),1),t("td",lt,n(e.customer_status||"Pending"),1),t("td",it,n(e.status||"Not verified"),1),t("td",at,n(e.created_at),1),t("td",rt,n(e.updated_at),1),t("td",dt,[t("div",ct,[e.customer_status==="approved"?(i(),l("button",{key:0,onClick:a=>O(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," Delete ",8,ut)):(i(),l(c,{key:1},[t("button",{onClick:a=>E(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold text-xs sm:text-sm transition text-white bg-green-600 hover:bg-green-700"}," Approve ",8,pt),t("button",{onClick:a=>U(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," Decline ",8,xt)],64))])])]))),128))])])])):x("",!0),d.value==="owners"?(i(),l("div",mt,[t("table",bt,[t("thead",ht,[t("tr",null,[(i(),l(c,null,_(["ID","Name","Email","Verified At","Password","District","Address","Photo1","Photo2","Photo3","Status","Token","Created","Updated","Actions"],e=>t("th",{key:e,class:"px-2 sm:px-4 py-2 sm:py-3 font-semibold whitespace-nowrap"},n(e),1)),64))])]),t("tbody",gt,[(i(!0),l(c,null,_(o.owners,e=>(i(),l("tr",{key:e.id,class:"border-t hover:bg-gray-50 transition"},[t("td",vt,n(e.id),1),t("td",yt,n(e.name),1),t("td",ft,n(e.email),1),t("td",_t,n(e.email_verified_at),1),t("td",wt,n(e.password),1),t("td",kt,n(e.district),1),t("td",Ct,n(e.address),1),t("td",Dt,[t("img",{src:p(e.photo1),alt:"Photo 1",class:"h-10 w-10 sm:h-16 sm:w-16 object-cover rounded border mx-auto cursor-pointer hover:opacity-80 transition",onClick:a=>y(p(e.photo1))},null,8,At)]),t("td",Ft,[t("img",{src:p(e.photo2),alt:"Photo 2",class:"h-10 w-10 sm:h-16 sm:w-16 object-cover rounded border mx-auto cursor-pointer hover:opacity-80 transition",onClick:a=>y(p(e.photo2))},null,8,$t)]),t("td",jt,[t("img",{src:p(e.photo3),alt:"Photo 3",class:"h-10 w-10 sm:h-16 sm:w-16 object-cover rounded border mx-auto cursor-pointer hover:opacity-80 transition",onClick:a=>y(p(e.photo3))},null,8,Pt)]),t("td",Nt,n(e.status),1),t("td",St,n(e.remember_token),1),t("td",Mt,n(e.created_at),1),t("td",Vt,n(e.updated_at),1),t("td",Wt,[t("div",Ot,[e.status==="approved"?(i(),l(c,{key:0},[t("button",{onClick:a=>W(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," Delete ",8,zt),t("button",{onClick:a=>P(e),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," View Feedback ",8,Bt)],64)):(i(),l(c,{key:1},[t("button",{onClick:a=>z(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 rounded-lg font-semibold text-xs sm:text-sm transition text-white bg-green-600 hover:bg-green-700"}," Approve ",8,It),t("button",{onClick:a=>B(e.id),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," Decline ",8,Tt),t("button",{onClick:a=>P(e),class:"min-w-[70px] px-3 py-1 sm:px-4 sm:py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold text-xs sm:text-sm transition"}," View Feedback ",8,Et)],64))])])]))),128))])])])):x("",!0)]),k.value?(i(),l("div",Ut,[t("img",{src:$.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,Lt),t("button",{onClick:s[3]||(s[3]=e=>k.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"}," ✕ ")])):x("",!0),v.value?(i(),l("div",Rt,[t("div",qt,[s[15]||(s[15]=t("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Owner Request",-1)),s[16]||(s[16]=t("p",{class:"text-gray-600 mb-3"},"Please write the reason for declining this owner:",-1)),M(t("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>h.value=e),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[V,h.value]]),t("div",Gt,[t("button",{onClick:s[5]||(s[5]=e=>v.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),t("button",{onClick:I,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):x("",!0),C.value?(i(),l("div",Ht,[t("div",Jt,[t("h2",Kt," Feedback for "+n(j.value),1),D.value.length?(i(),l("div",Qt,[(i(!0),l(c,null,_(D.value,(e,a)=>{var N;return i(),l("div",{key:a,class:"border border-gray-200 rounded-lg p-3"},[t("div",Xt,[t("span",Yt,n(((N=e.user)==null?void 0:N.name)||"Anonymous"),1),t("span",Zt,"⭐ "+n(e.rating)+"/5",1)]),t("p",te,n(e.comment),1)])}),128))])):(i(),l("div",ee," No feedback yet. ")),t("button",{onClick:s[6]||(s[6]=e=>C.value=!1),class:"absolute top-4 right-5 text-gray-600 hover:text-black text-2xl font-bold"}," ✕ ")])])):x("",!0),f.value?(i(),l("div",se,[t("div",oe,[s[17]||(s[17]=t("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Customer Account",-1)),s[18]||(s[18]=t("p",{class:"text-gray-600 mb-3"},"Please write the reason for declining this customer:",-1)),M(t("textarea",{"onUpdate:modelValue":s[7]||(s[7]=e=>g.value=e),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[V,g.value]]),t("div",ne,[t("button",{onClick:s[8]||(s[8]=e=>f.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),t("button",{onClick:L,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):x("",!0)]))}});export{ae as default};
