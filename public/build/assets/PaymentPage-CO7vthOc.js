import{d as C,r as P,x as $,c as r,o as a,a as t,e as l,j as d,t as n,f as B,u as m}from"./app-CK0SqzMc.js";import{d as D}from"./index-DSZS277Q.js";const S={class:"min-h-screen py-10 px-4 flex justify-center bg-[#F8FAFC]"},q={class:"w-full max-w-xl bg-white rounded-2xl shadow-lg p-6"},E={class:"text-3xl font-extrabold text-center text-[#002B5C] mb-6 tracking-tight"},N={class:"text-[#FF2D2D]"},j={key:0,class:"bg-green-100 text-green-800 p-3 rounded-lg mb-4 text-base font-medium"},z={key:1,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},A={key:2,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},Q={class:"mt-2"},R=["href"],T={key:3,class:"space-y-4 mb-6"},V={class:"mb-6 text-center"},I=["src"],U={class:"text-base text-[#182235] font-medium"},G={class:"text-base text-[#182235] font-medium"},H={class:"text-base text-[#182235] font-medium"},M={class:"text-base text-[#182235] font-medium"},W={class:"flex gap-4"},J={class:"text-base text-[#182235] font-medium"},K={class:"text-base text-[#182235] font-medium"},L={class:"text-base text-[#182235] font-medium"},O={key:0,class:"text-red-600 text-sm mt-1"},X=["disabled"],Y={key:0},Z={key:1},et=C({__name:"PaymentPage",props:{shop:{},booking:{},pageTitle:{},error:{}},setup(_){var b,g,f,c,u,h,x;const s=_,p="https://washwisecapstone2-production.up.railway.app",k=P(s.shop.qr_code?s.shop.qr_code.startsWith("http")?s.shop.qr_code:`${p}/storage/${s.shop.qr_code}`:`${p}/images/default-qr.png`),i=$({name:((b=s.booking)==null?void 0:b.name)??"",email:((g=s.booking)==null?void 0:g.email)??"",size_of_the_car:((f=s.booking)==null?void 0:f.size_of_the_car)??"",contact_no:((c=s.booking)==null?void 0:c.contact_no)??"",date_of_booking:((u=s.booking)==null?void 0:u.date_of_booking)??"",time_of_booking:((h=s.booking)==null?void 0:h.time_of_booking)??"",slot_number:((x=s.booking)==null?void 0:x.slot_number)??1,payment_amount:50,payment_proof:null}),v=e=>{const o=e.target;o&&(o.src=`${p}/images/default-qr.png`)},w=e=>{var y;const o=e.target;(y=o==null?void 0:o.files)!=null&&y[0]&&(i.payment_proof=o.files[0])},F=()=>{if(!i.payment_proof){i.errors.payment_proof="Please upload payment proof (screenshot).";return}i.post(`/customer/book/${s.shop.id}/confirm`,{forceFormData:!0,onSuccess:()=>D.Inertia.visit("/settings/appearance"),onError:e=>console.error("Payment submission error:",e)})};return(e,o)=>(a(),r("div",S,[t("div",q,[t("h1",E,[o[0]||(o[0]=d("Confirm & Pay for ",-1)),t("span",N,n(e.shop.name),1)]),e.$page.props.flash.success?(a(),r("div",j,n(e.$page.props.flash.success),1)):l("",!0),e.$page.props.flash.error?(a(),r("div",z,n(e.$page.props.flash.error),1)):l("",!0),e.error||!e.booking?(a(),r("div",A,[d(n(e.error||"Please submit booking details to proceed with payment.")+" ",1),t("div",Q,[t("a",{href:`/shop/${e.shop.id}/book`,class:"text-[#002B5C] underline font-semibold"},"Go to Booking Form",8,R)])])):l("",!0),e.booking?(a(),r("div",T,[t("div",V,[o[1]||(o[1]=t("h2",{class:"text-base font-bold text-[#182235] mb-2"},[d("Scan to Pay "),t("span",{class:"font-normal text-gray-500"},"(QR Code)")],-1)),t("img",{src:k.value,onError:v,alt:"Shop QR Code",class:"mx-auto h-40 w-40 object-contain rounded-lg border border-gray-200 bg-white"},null,40,I),o[2]||(o[2]=t("p",{class:"text-sm text-gray-500 mt-2"},"Scan this QR with your payment app, then upload a screenshot as proof of payment.",-1))]),t("div",null,[o[3]||(o[3]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Name",-1)),t("p",U,n(e.booking.name),1)]),t("div",null,[o[4]||(o[4]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Email",-1)),t("p",G,n(e.booking.email),1)]),t("div",null,[o[5]||(o[5]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Size",-1)),t("p",H,n(e.booking.size_of_the_car),1)]),t("div",null,[o[6]||(o[6]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Contact",-1)),t("p",M,n(e.booking.contact_no),1)]),t("div",W,[t("div",null,[o[7]||(o[7]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Date",-1)),t("p",J,n(e.booking.date_of_booking),1)]),t("div",null,[o[8]||(o[8]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Time",-1)),t("p",K,n(e.booking.time_of_booking),1)])]),t("div",null,[o[9]||(o[9]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Slot Number",-1)),t("p",L,n(e.booking.slot_number),1)]),o[10]||(o[10]=t("div",null,[t("h3",{class:"text-sm font-semibold text-gray-700"},"Payment Amount"),t("p",{class:"text-base text-[#FF2D2D] font-bold"},"PHP 50.00")],-1))])):l("",!0),e.booking?(a(),r("form",{key:4,onSubmit:B(F,["prevent"]),class:"space-y-4",enctype:"multipart/form-data"},[t("div",null,[o[11]||(o[11]=t("label",{class:"block text-base font-bold text-[#182235] mb-2"},[d(" Upload Payment Proof "),t("span",{class:"font-normal text-gray-500"},"(screenshot of receipt)")],-1)),t("input",{onChange:w,type:"file",accept:"image/jpeg,image/png",class:"w-full mt-1 p-2 border-2 border-[#182235] bg-[#F8FAFC] text-[#182235] rounded-lg font-semibold cursor-pointer",required:""},null,32),m(i).errors.payment_proof?(a(),r("div",O,n(m(i).errors.payment_proof),1)):l("",!0)]),t("button",{type:"submit",class:"w-full bg-[#FF2D2D] text-white py-2 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50",disabled:m(i).processing},[m(i).processing?(a(),r("span",Y,"Booking...")):(a(),r("span",Z,"Confirm Booking"))],8,X)],32)):l("",!0)])]))}});export{et as default};
