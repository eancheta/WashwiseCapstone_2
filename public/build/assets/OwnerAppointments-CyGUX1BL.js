import{d as B,r as x,b as N,c as n,o as a,l as P,a as t,u as S,m as V,g as m,e as c,h as M,i as T,v as _,F as h,j as W,W as y,t as d}from"./app-OwupTBRI.js";const j={class:"min-h-screen bg-gray-100"},E={class:"py-6 max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white shadow-md rounded-lg p-6"},$={class:"mb-4 flex items-center space-x-4"},U={key:0,class:"flex items-center space-x-2"},z={class:"overflow-x-auto"},I={class:"min-w-full bg-white border rounded-lg shadow"},L={class:"px-4 py-3"},Y={class:"px-4 py-3"},q={class:"px-4 py-3"},H={class:"px-4 py-3"},O={class:"px-4 py-3"},R={class:"px-4 py-3"},G={class:"px-4 py-3"},J={class:"px-4 py-3 text-center"},K=["src"],Q={key:1,class:"text-gray-400 italic"},X={class:"px-4 py-3"},Z={class:"px-4 py-3"},tt={key:0,class:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full"},et={key:1,class:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full"},st={key:2,class:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full"},ot={key:3,class:"px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full"},nt={key:4,class:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full"},at={class:"px-4 py-3 text-center space-x-2"},lt=["onClick"],dt=["onClick"],rt={key:0},it="https://res.cloudinary.com/dqfyjxaw2/image/upload/v1758645874/",pt=B({__name:"OwnerAppointments",props:{appointments:{}},setup(b){const v=b;function w(o){y.post(`/owner/appointments/${o}/approve`)}function k(o){y.post(`/owner/appointments/${o}/decline`)}function D(o){return o.payment_proof?o.payment_proof.startsWith("http")?o.payment_proof:it+o.payment_proof:null}function C(o){const s=o.target;s.outerHTML='<span class="text-gray-600">No proof</span>'}const r=x("all"),i=x(""),u=x(""),g=N(()=>{let o=[...v.appointments];const s=new Date;let e=null,l=null;if(r.value==="today")e=new Date(s.toDateString()),l=new Date(e),l.setDate(l.getDate()+1);else if(r.value==="week"){const p=s.getDate()-s.getDay();e=new Date(s.setDate(p)),l=new Date(s.setDate(p+7))}else r.value==="month"?(e=new Date(s.getFullYear(),s.getMonth(),1),l=new Date(s.getFullYear(),s.getMonth()+1,1)):r.value==="custom"&&i.value&&u.value&&(e=new Date(i.value),l=new Date(u.value),l.setDate(l.getDate()+1));return e&&l&&(o=o.filter(p=>{const f=new Date(p.date_of_booking);return f>=e&&f<l})),o});function A(){y.visit("/owner/dashboard")}return(o,s)=>(a(),n(h,null,[P(S(V),{title:"Appointments"}),t("div",j,[t("div",{class:"bg-white shadow"},[t("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex justify-between items-center"},[s[3]||(s[3]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Appointments",-1)),t("button",{onClick:A,class:"px-4 py-2 bg-gray-700 text-white rounded-lg shadow hover:bg-gray-800"}," Back to Dashboard ")])]),t("div",E,[t("div",F,[t("div",$,[m(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.value=e),class:"border rounded p-2"},[...s[4]||(s[4]=[T('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[M,r.value]]),r.value==="custom"?(a(),n("div",U,[m(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),class:"border rounded p-2"},null,512),[[_,i.value]]),s[5]||(s[5]=t("span",null,"to",-1)),m(t("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=e=>u.value=e),class:"border rounded p-2"},null,512),[[_,u.value]])])):c("",!0)]),t("div",z,[t("table",I,[s[7]||(s[7]=t("thead",null,[t("tr",{class:"bg-gray-50 border-b"},[t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Name"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Car Size"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Contact"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Email"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Booking Time"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Booking Date"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Slot"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Payment Proof"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Amount"),t("th",{class:"px-4 py-3 text-left text-sm font-medium text-gray-600"},"Status"),t("th",{class:"px-4 py-3 text-center text-sm font-medium text-gray-600"},"Actions")])],-1)),t("tbody",null,[(a(!0),n(h,null,W(g.value,e=>(a(),n("tr",{key:e.id,class:"border-b hover:bg-gray-50"},[t("td",L,d(e.name),1),t("td",Y,d(e.size_of_the_car),1),t("td",q,d(e.contact_no),1),t("td",H,d(e.email),1),t("td",O,d(e.time_of_booking),1),t("td",R,d(e.date_of_booking),1),t("td",G,d(e.slot_number),1),t("td",J,[e.payment_proof?(a(),n("img",{key:0,src:D(e),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded border mx-auto",onError:C},null,40,K)):(a(),n("span",Q,"Walk_IN"))]),t("td",X,d(e.payment_amount??"-"),1),t("td",Z,[e.status==="pending"?(a(),n("span",tt," Pending ")):e.status==="approved"?(a(),n("span",et," Approved ")):e.status==="declined"?(a(),n("span",st," Declined ")):e.status==="paid"?(a(),n("span",ot," Paid ")):(a(),n("span",nt,d(e.status),1))]),t("td",at,[e.status==="pending"?(a(),n("button",{key:0,onClick:l=>w(e.id),class:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700"}," Approve ",8,lt)):c("",!0),e.status==="pending"?(a(),n("button",{key:1,onClick:l=>k(e.id),class:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700"}," Decline ",8,dt)):c("",!0)])]))),128)),g.value.length===0?(a(),n("tr",rt,[...s[6]||(s[6]=[t("td",{colspan:"11",class:"px-4 py-3 text-center text-gray-500 italic"}," No appointments found ",-1)])])):c("",!0)])])])])])])],64))}});export{pt as default};
