import{d as $,r as d,b as I,c as l,o as a,l as T,a as e,e as m,u as W,m as E,g,h as j,s as z,v as b,F as C,i as R,W as h,n as U,t as r}from"./app-BnDWbqy3.js";const O={class:"min-h-screen bg-gradient-to-br from-gray-100 via-white to-gray-100 py-6 px-4 flex flex-col items-center"},Y={class:"w-full max-w-7xl p-6 sm:p-10 relative"},L={class:"mb-8 p-6 bg-white shadow-lg rounded-2xl grid grid-cols-1 sm:grid-cols-3 gap-4 border border-gray-200"},q={key:0},G={key:1},H={key:0,class:"text-gray-500 text-lg text-center py-12"},J={key:1,class:"overflow-x-auto"},K={class:"w-full border border-gray-200 rounded-xl overflow-hidden shadow-sm"},Q={class:"text-[#182235] font-medium"},X={class:"px-4 py-3"},Z={class:"px-4 py-3"},ee={class:"px-4 py-3"},te={key:0,class:"text-green-600 font-semibold"},oe={key:1,class:"text-red-600 font-semibold"},se={key:2,class:"text-gray-600 font-semibold"},ne={class:"px-4 py-3 text-center"},le={class:"px-4 py-3"},ae={class:"px-4 py-3"},re={class:"px-4 py-3"},ie={class:"px-4 py-3"},de={class:"px-4 py-3"},ce={class:"px-4 py-3"},ue={class:"px-4 py-3 text-center"},pe=["src","onClick"],fe={class:"px-4 py-3 text-center font-bold text-[#FF2D2D]"},xe={class:"px-4 py-3 text-center flex justify-center gap-3"},me=["onClick"],ge=["onClick"],ye={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},ve={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},be={class:"mt-6 flex justify-end gap-3"},he={key:1,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},_e=["src"],De=$({__name:"OwnerAppointments",props:{appointments:{}},setup(F){const P=F;function B(s){h.post(`/owner/appointments/${s}/approve`)}const u=d(!1),p=d(""),y=d(null);function A(s){y.value=s,u.value=!0}function S(){y.value&&(h.post(`/owner/appointments/${y.value}/decline`,{reason:p.value}),u.value=!1,p.value="")}function _(s){return s.payment_proof?s.payment_proof.startsWith("http")||s.payment_proof.startsWith("/storage/")?s.payment_proof:`/storage/${s.payment_proof}`:"No Proof"}function N(s){const t=s.target;t.src="no-proof"}const v=d(!1),w=d("");function M(s){w.value=s,v.value=!0}const i=d("all"),f=d(""),x=d(""),D=I(()=>{let s=[...P.appointments];const t=new Date;let o=null,n=null;if(i.value==="today")o=new Date(t.toDateString()),n=new Date(o),n.setDate(n.getDate()+1);else if(i.value==="week"){const c=t.getDate()-t.getDay();o=new Date(t.setDate(c)),n=new Date(t.setDate(c+7))}else i.value==="month"?(o=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+1,1)):i.value==="custom"&&f.value&&x.value&&(o=new Date(f.value),n=new Date(x.value),n.setDate(n.getDate()+1));return o&&n&&(s=s.filter(c=>{const k=new Date(c.date_of_booking);return k>=o&&k<n})),s});function V(){h.visit("/owner/dashboard")}return(s,t)=>(a(),l(C,null,[T(W(E),{title:"Owner Appointments"}),e("div",O,[e("div",Y,[e("div",{class:"absolute top-6 left-6"},[e("button",{onClick:V,class:"px-5 py-2 bg-[#002B5C] text-white font-semibold rounded-xl shadow-md hover:bg-[#FF2D2D] transition transform hover:-translate-y-0.5"}," ← Return to Dashboard ")]),t[11]||(t[11]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl sm:text-4xl font-extrabold text-[#002B5C] mb-2"}," Customer Appointments "),e("p",{class:"text-gray-500"},"Manage and monitor all customer bookings efficiently")],-1)),e("div",L,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Date Range",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full px-4 py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},[...t[6]||(t[6]=[z('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[j,i.value]])]),i.value==="custom"?(a(),l("div",q,[t[8]||(t[8]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"From",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),class:"w-full px-4 py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[b,f.value]])])):m("",!0),i.value==="custom"?(a(),l("div",G,[t[9]||(t[9]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"To",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>x.value=o),class:"w-full px-4 py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[b,x.value]])])):m("",!0)]),D.value.length===0?(a(),l("div",H," No appointments found. ")):(a(),l("div",J,[e("table",K,[t[10]||(t[10]=e("thead",{class:"bg-gradient-to-r from-[#002B5C] to-[#00509E] text-white"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left"},"Date"),e("th",{class:"px-4 py-3 text-left"},"Time"),e("th",{class:"px-4 py-3 text-left"},"Status"),e("th",{class:"px-4 py-3 text-center"},"ID"),e("th",{class:"px-4 py-3 text-left"},"Name"),e("th",{class:"px-4 py-3 text-left"},"Email"),e("th",{class:"px-4 py-3 text-left"},"Car Size"),e("th",{class:"px-4 py-3 text-left"},"Contact"),e("th",{class:"px-4 py-3 text-left"},"Slot"),e("th",{class:"px-4 py-3 text-left"},"Created"),e("th",{class:"px-4 py-3 text-center"},"Payment Proof"),e("th",{class:"px-4 py-3 text-center"},"Amount"),e("th",{class:"px-4 py-3 text-center"},"Actions")])],-1)),e("tbody",Q,[(a(!0),l(C,null,R(D.value,(o,n)=>(a(),l("tr",{key:o.id,class:U(n%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100 transition")},[e("td",X,r(o.date_of_booking),1),e("td",Z,r(o.time_of_booking),1),e("td",ee,[o.status==="approved"?(a(),l("span",te,"Approved")):o.status==="declined"?(a(),l("span",oe,"Declined")):(a(),l("span",se,"Pending"))]),e("td",ne,r(o.id),1),e("td",le,r(o.name),1),e("td",ae,r(o.email||"Walk_IN"),1),e("td",re,r(o.size_of_the_car),1),e("td",ie,r(o.contact_no),1),e("td",de,r(o.slot_number),1),e("td",ce,r(o.created_at),1),e("td",ue,[e("img",{src:_(o),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:c=>M(_(o)),onError:N},null,40,pe)]),e("td",fe,r(o.payment_amount??"Walk_IN"),1),e("td",xe,[e("button",{onClick:c=>B(o.id),class:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 shadow-md transition transform hover:-translate-y-0.5"}," Approve ",8,me),e("button",{onClick:c=>A(o.id),class:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 shadow-md transition transform hover:-translate-y-0.5"}," Decline ",8,ge)])],2))),128))])])]))])]),u.value?(a(),l("div",ye,[e("div",ve,[t[12]||(t[12]=e("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Appointment",-1)),t[13]||(t[13]=e("p",{class:"text-gray-600 mb-3"},"Please write the reason for declining this appointment:",-1)),g(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>p.value=o),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[b,p.value]]),e("div",be,[e("button",{onClick:t[4]||(t[4]=o=>u.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),e("button",{onClick:S,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):m("",!0),v.value?(a(),l("div",he,[e("img",{src:w.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,_e),e("button",{onClick:t[5]||(t[5]=o=>v.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"},"✕")])):m("",!0)],64))}});export{De as default};
