import{d as F,x as C,c as n,o as r,a as t,e as l,s as d,t as s,f as P,u as m}from"./app-CjXY2mcd.js";import{d as w}from"./index-Dj8qtM8D.js";const D={class:"min-h-screen py-10 px-4 flex justify-center bg-[#F8FAFC]"},B={class:"w-full max-w-xl bg-white rounded-2xl shadow-lg p-6"},S={class:"text-3xl font-extrabold text-center text-[#002B5C] mb-6 tracking-tight"},$={class:"text-[#FF2D2D]"},q={key:0,class:"bg-green-100 text-green-800 p-3 rounded-lg mb-4 text-base font-medium"},N={key:1,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},z={key:2,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},E={class:"mt-2"},Q=["href"],j={key:3,class:"space-y-4 mb-6 text-center"},A={class:"mb-6 text-center"},R=["src"],T={class:"text-base text-[#182235] font-medium"},V={class:"text-base text-[#182235] font-medium"},G={class:"text-base text-[#182235] font-medium"},H={class:"text-base text-[#182235] font-medium"},I={class:"flex gap-4"},M={class:"text-base text-[#182235] font-medium"},U={class:"text-base text-[#182235] font-medium"},W={class:"text-base text-[#182235] font-medium"},J={key:0,class:"text-red-600 text-sm mt-1"},K=["disabled"],L={key:0},O={key:1},Z=F({__name:"PaymentPage",props:{shop:{},booking:{},pageTitle:{},error:{}},setup(y){var p,b,f,g,u,c,x;const i=y,a=C({name:((p=i.booking)==null?void 0:p.name)??"",email:((b=i.booking)==null?void 0:b.email)??"",size_of_the_car:((f=i.booking)==null?void 0:f.size_of_the_car)??"",contact_no:((g=i.booking)==null?void 0:g.contact_no)??"",date_of_booking:((u=i.booking)==null?void 0:u.date_of_booking)??"",time_of_booking:((c=i.booking)==null?void 0:c.time_of_booking)??"",slot_number:((x=i.booking)==null?void 0:x.slot_number)??1,payment_amount:50,payment_proof:null}),h=e=>{var _;const o=e.target;(_=o==null?void 0:o.files)!=null&&_[0]&&(a.payment_proof=o.files[0])},k=()=>{if(!a.payment_proof){a.errors.payment_proof="Please upload payment proof (screenshot).";return}a.post(`/customer/book/${i.shop.id}/confirm`,{forceFormData:!0,onSuccess:()=>w.Inertia.visit("/settings/appearance"),onError:e=>console.error("Payment submission error:",e)})};function v(e){return e.qr_code?e.qr_code.startsWith("http")?e.qr_code:`/storage/${e.qr_code}`:""}return(e,o)=>(r(),n("div",D,[t("div",B,[t("h1",S,[o[0]||(o[0]=d("Confirm & Pay for ",-1)),t("span",$,s(e.shop.name),1)]),e.$page.props.flash.success?(r(),n("div",q,s(e.$page.props.flash.success),1)):l("",!0),e.$page.props.flash.error?(r(),n("div",N,s(e.$page.props.flash.error),1)):l("",!0),e.error||!e.booking?(r(),n("div",z,[d(s(e.error||"Please submit booking details to proceed with payment.")+" ",1),t("div",E,[t("a",{href:`/shop/${e.shop.id}/book`,class:"text-[#002B5C] underline font-semibold"},"Go to Booking Form",8,Q)])])):l("",!0),e.booking?(r(),n("div",j,[t("div",A,[o[1]||(o[1]=t("h2",{class:"text-base font-bold text-[#182235] mb-2"},[d("Scan to Pay "),t("span",{class:"font-normal text-gray-500"},"(QR Code)")],-1)),t("img",{src:v(e.shop),alt:"QR Code",class:"h-20 w-20 object-contain mb-4 text-center"},null,8,R),o[2]||(o[2]=t("p",{class:"text-sm text-gray-500 mt-2"},"Scan this QR with your payment app, then upload a screenshot as proof of payment.",-1))]),t("div",null,[o[3]||(o[3]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Name",-1)),t("p",T,s(e.booking.name),1)]),t("div",null,[o[4]||(o[4]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Email",-1)),t("p",V,s(e.booking.email),1)]),t("div",null,[o[5]||(o[5]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Size",-1)),t("p",G,s(e.booking.size_of_the_car),1)]),t("div",null,[o[6]||(o[6]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Contact",-1)),t("p",H,s(e.booking.contact_no),1)]),t("div",I,[t("div",null,[o[7]||(o[7]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Date",-1)),t("p",M,s(e.booking.date_of_booking),1)]),t("div",null,[o[8]||(o[8]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Time",-1)),t("p",U,s(e.booking.time_of_booking),1)])]),t("div",null,[o[9]||(o[9]=t("h3",{class:"text-sm font-semibold text-gray-700"},"Slot Number",-1)),t("p",W,s(e.booking.slot_number),1)]),o[10]||(o[10]=t("div",null,[t("h3",{class:"text-sm font-semibold text-gray-700"},"Payment Amount"),t("p",{class:"text-base text-[#FF2D2D] font-bold"},"PHP 50.00")],-1))])):l("",!0),e.booking?(r(),n("form",{key:4,onSubmit:P(k,["prevent"]),class:"space-y-4",enctype:"multipart/form-data"},[t("div",null,[o[11]||(o[11]=t("label",{class:"block text-base font-bold text-[#182235] mb-2"},[d(" Upload Payment Proof "),t("span",{class:"font-normal text-gray-500"},"(screenshot of receipt)")],-1)),t("input",{onChange:h,type:"file",accept:"image/jpeg,image/png",class:"w-full mt-1 p-2 border-2 border-[#182235] bg-[#F8FAFC] text-[#182235] rounded-lg font-semibold cursor-pointer",required:""},null,32),m(a).errors.payment_proof?(r(),n("div",J,s(m(a).errors.payment_proof),1)):l("",!0)]),t("button",{type:"submit",class:"w-full bg-[#FF2D2D] text-white py-2 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50",disabled:m(a).processing},[m(a).processing?(r(),n("span",L,"Booking...")):(r(),n("span",O,"Confirm Booking"))],8,K)],32)):l("",!0)])]))}});export{Z as default};
