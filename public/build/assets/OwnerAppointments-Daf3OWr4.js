import{d as U,r as i,c as z,a as n,o as a,m as E,e,b as c,u as R,n as O,t as l,g as m,i as A,k as F,v as w,F as W,j as Y,h as B,W as _,p as P}from"./app-dK8Lf2wv.js";const L={class:"flex min-h-screen bg-gradient-to-br from-white via-blue-50 to-[#002B5C] py-4 sm:py-8 px-3 sm:px-6 flex-col items-center overflow-x-hidden"},q={class:"w-full max-w-[95%] xl:max-w-[1600px] p-4 sm:p-8 bg-white rounded-2xl shadow-xl border border-gray-200"},G={key:0,class:"mb-6 w-full"},H={class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg font-semibold shadow-sm text-center"},J={key:1,class:"mb-6 w-full"},K={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg font-semibold shadow-sm text-center"},Q={class:"mb-8 p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 border border-gray-200"},X={key:0},Z={key:1},ee={key:2,class:"text-gray-500 text-lg text-center py-12"},te={key:3,class:"overflow-x-auto rounded-xl border border-gray-200 shadow-md w-full"},se={class:"min-w-full text-[13px] sm:text-sm text-left border-collapse"},oe={class:"text-[#182235] bg-white"},le={class:"px-3 sm:px-4 py-3 text-center"},ne={class:"px-3 sm:px-4 py-3"},ae={class:"px-3 sm:px-4 py-3"},de={class:"px-3 sm:px-4 py-3"},re={key:0,class:"text-green-600 font-semibold"},ie={key:1,class:"text-red-600 font-semibold"},pe={key:2,class:"text-gray-600 font-semibold"},ce={class:"px-3 sm:px-4 py-3 text-center"},me={class:"px-3 sm:px-4 py-3"},ue={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},xe={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},be={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},ge={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},fe={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},ye={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},he={class:"px-3 sm:px-4 py-3 hidden lg:table-cell"},ve={class:"px-3 sm:px-4 py-3 text-center hidden md:table-cell"},we=["src","onClick"],_e={class:"px-3 sm:px-4 py-3 text-center font-bold text-[#FF2D2D] hidden sm:table-cell"},De={class:"px-3 sm:px-4 py-3 text-center flex flex-col sm:flex-row justify-center gap-2 sm:gap-3"},ke=["onClick","disabled"],Ce=["onClick","disabled"],Ae={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 px-4"},Fe={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},We={class:"mt-6 flex justify-end gap-3"},Be={key:1,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},Pe=["src"],Se={class:"bg-[#182235] text-gray-200 text-center sm:text-left py-8 px-6 border-t border-gray-700"},$e={class:"border-t border-gray-700 mt-8 pt-4 text-center text-xs text-gray-400"},Te=U({__name:"OwnerAppointments",props:{appointments:{}},setup(S){const $=S;function N(o){_.post(`/owner/appointments/${o}/approve`)}const u=i(!1),x=i(""),y=i(null);function T(o){y.value=o,u.value=!0}function V(){y.value&&(_.post(`/owner/appointments/${y.value}/decline`,{reason:x.value}),u.value=!1,x.value="")}function D(o){return o.payment_proof?o.payment_proof.startsWith("http")||o.payment_proof.startsWith("/storage/")?o.payment_proof:`/storage/${o.payment_proof}`:"/images/hero-carwash.jpg"}function j(o){const t=o.target;t.src="/images/hero-carwash.jpg"}const h=i(!1),k=i("");function I(o){k.value=o,h.value=!0}const p=i("all"),b=i(""),g=i(""),f=i("all"),C=z(()=>{let o=[...$.appointments];const t=new Date;let s=null,d=null;if(p.value==="today")s=new Date(t.toDateString()),d=new Date(s),d.setDate(d.getDate()+1);else if(p.value==="week"){const r=t.getDate()-t.getDay();s=new Date(t.setDate(r)),d=new Date(t.setDate(r+7))}else p.value==="month"?(s=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,1)):p.value==="custom"&&b.value&&g.value&&(s=new Date(b.value),d=new Date(g.value),d.setDate(d.getDate()+1));return s&&d&&(o=o.filter(r=>{const v=new Date(r.date_of_booking);return v>=s&&v<d})),f.value!=="All"&&(o=o.filter(r=>(r.status||"Pending")===f.value)),o});function M(){_.visit("/owner/dashboard")}return(o,t)=>(a(),n(W,null,[E(R(O),{title:"Owner Appointments"}),e("div",L,[e("div",q,[o.$page.props.flash.success?(a(),n("div",G,[e("div",H,l(o.$page.props.flash.success),1)])):c("",!0),o.$page.props.flash.error?(a(),n("div",J,[e("div",K,l(o.$page.props.flash.error),1)])):c("",!0),e("div",{class:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4"},[e("button",{onClick:M,class:"px-5 py-2 bg-[#002B5C] text-white font-semibold rounded-lg shadow-md hover:bg-[#FF2D2D] transition"}," ‚Üê Return to Dashboard "),t[7]||(t[7]=e("div",{class:"text-center sm:flex-1"},[e("h1",{class:"text-2xl sm:text-4xl font-extrabold text-[#002B5C] mb-1 sm:mb-2"}," Customer Appointments: "),e("p",{class:"text-gray-500 text-sm sm:text-base"}," Manage and monitor all customer bookings efficiently ")],-1)),t[8]||(t[8]=e("div",{class:"hidden sm:block w-[150px]"},null,-1))]),e("div",Q,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Date Range",-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},[...t[9]||(t[9]=[F('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[A,p.value]])]),p.value==="custom"?(a(),n("div",X,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"From",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[w,b.value]])])):c("",!0),p.value==="custom"?(a(),n("div",Z,[t[12]||(t[12]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"To",-1)),m(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[w,g.value]])])):c("",!0),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Status",-1)),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},[...t[13]||(t[13]=[e("option",{value:"All"},"All",-1),e("option",{value:"Approved"},"Approved",-1),e("option",{value:"Declined"},"Declined",-1),e("option",{value:"Pending"},"Pending",-1)])],512),[[A,f.value]])])]),C.value.length===0?(a(),n("div",ee," No appointments found. ")):(a(),n("div",te,[e("table",se,[t[15]||(t[15]=e("thead",{class:"bg-[#002B5C] text-white"},[e("tr",null,[e("th",{class:"px-3 sm:px-4 py-3"},"No."),e("th",{class:"px-3 sm:px-4 py-3"},"Date"),e("th",{class:"px-3 sm:px-4 py-3"},"Time"),e("th",{class:"px-3 sm:px-4 py-3"},"Status"),e("th",{class:"px-3 sm:px-4 py-3 text-center"},"ID"),e("th",{class:"px-3 sm:px-4 py-3"},"Name"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Email"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Car Size"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Services"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Contact"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Slot"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Type of Appointment"),e("th",{class:"px-3 sm:px-4 py-3 hidden lg:table-cell"},"Created"),e("th",{class:"px-3 sm:px-4 py-3 text-center hidden md:table-cell"},"Payment Proof"),e("th",{class:"px-3 sm:px-4 py-3 text-center hidden sm:table-cell"},"Amount"),e("th",{class:"px-3 sm:px-4 py-3 text-center"},"Actions")])],-1)),e("tbody",oe,[(a(!0),n(W,null,Y(C.value,(s,d)=>(a(),n("tr",{key:s.id,class:P([d%2===0?"bg-gray-50 hover:bg-gray-100":"hover:bg-gray-50","transition"])},[e("td",le,l(d+1),1),e("td",ne,l(s.date_of_booking),1),e("td",ae,l(s.time_of_booking),1),e("td",de,[s.status==="Approved"?(a(),n("span",re,"Approved")):s.status==="Declined"?(a(),n("span",ie,"Declined")):(a(),n("span",pe,"Pending"))]),e("td",ce,l(s.id),1),e("td",me,l(s.name),1),e("td",ue,l(s.email||"Walk_IN"),1),e("td",xe,l(s.size_of_the_car),1),e("td",be,l(s.services_offered||"N/A"),1),e("td",ge,l(s.contact_no),1),e("td",fe,l(s.slot_number),1),e("td",ye,[e("span",{class:P(s.email?"text-blue-600 font-semibold":"text-gray-700 font-semibold")},l(s.email?"Book Online":"Walk-In"),3)]),e("td",he,l(s.created_at),1),e("td",ve,[e("img",{src:D(s),alt:"Payment Proof",class:"h-12 sm:h-16 w-12 sm:w-16 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:r=>I(D(s)),onError:j},null,40,we)]),e("td",_e,l(s.payment_amount??"Walk_IN"),1),e("td",De,[e("button",{onClick:r=>N(s.id),disabled:s.status==="Approved"||s.status==="Declined",class:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg font-semibold text-xs sm:text-sm transition text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Approve ",8,ke),e("button",{onClick:r=>T(s.id),disabled:s.status==="Approved"||s.status==="Declined",class:"px-3 sm:px-4 py-1.5 sm:py-2 rounded-lg font-semibold text-xs sm:text-sm transition text-white bg-red-600 hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Decline ",8,Ce)])],2))),128))])])]))])]),u.value?(a(),n("div",Ae,[e("div",Fe,[t[16]||(t[16]=e("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Appointment",-1)),t[17]||(t[17]=e("p",{class:"text-gray-600 mb-3"}," Please write the reason for declining this appointment: ",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>x.value=s),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[w,x.value]]),e("div",We,[e("button",{onClick:t[5]||(t[5]=s=>u.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),e("button",{onClick:V,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):c("",!0),h.value?(a(),n("div",Be,[e("img",{src:k.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,Pe),e("button",{onClick:t[6]||(t[6]=s=>h.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"}," ‚úï ")])):c("",!0),e("footer",Se,[t[21]||(t[21]=F('<div class="max-w-6xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-6"><div><h2 class="text-lg font-bold text-white mb-3">About WashWise</h2><p class="text-sm leading-relaxed"> WashWise is your trusted platform for booking car wash services ‚Äî connecting customers and business owners for a smoother, cleaner experience every day. </p></div><div><h2 class="text-lg font-bold text-white mb-3">Contact Us</h2><ul class="text-sm space-y-1"><li>üìû +63 992 759 4673</li><li>‚úâÔ∏è washwise00@gmail.com</li></ul></div></div>',1)),e("div",$e,[B(" ¬© "+l(new Date().getFullYear())+" WashWise. All rights reserved. ",1),t[18]||(t[18]=e("br",{class:"sm:hidden"},null,-1)),t[19]||(t[19]=B(" Developed by ",-1)),t[20]||(t[20]=e("span",{class:"text-[#FF2D2D] font-semibold"},"Washwise Team.",-1))])])],64))}});export{Te as default};
