import{d as V,r as d,b as $,c as n,o as a,l as I,a as e,e as g,u as T,m as W,g as b,h as z,s as E,v as h,F as C,i as R,W as v,n as U,t as i}from"./app-ui57HkYQ.js";const O={class:"flex min-h-screen bg-gradient-to-br from-white via-blue-50 to-[#002B5C] py-4 sm:py-8 px-3 sm:px-6 flex-col items-center overflow-x-hidden"},Y={class:"w-full max-w-[95%] xl:max-w-[1600px] p-4 sm:p-8 bg-white rounded-2xl shadow-xl border border-gray-200"},L={class:"mb-8 p-4 sm:p-6 bg-gray-50 rounded-xl shadow-inner grid grid-cols-1 sm:grid-cols-3 gap-4 border border-gray-200"},q={key:0},G={key:1},H={key:0,class:"text-gray-500 text-lg text-center py-12"},J={key:1,class:"overflow-x-auto rounded-xl border border-gray-200 shadow-md w-full"},K={class:"min-w-full text-[13px] sm:text-sm text-left border-collapse"},Q={class:"text-[#182235] bg-white"},X={class:"px-3 sm:px-4 py-3"},Z={class:"px-3 sm:px-4 py-3"},ee={class:"px-3 sm:px-4 py-3"},te={key:0,class:"text-green-600 font-semibold"},se={key:1,class:"text-red-600 font-semibold"},oe={key:2,class:"text-gray-600 font-semibold"},le={class:"px-3 sm:px-4 py-3 text-center"},ne={class:"px-3 sm:px-4 py-3"},ae={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},ie={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},re={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},de={class:"px-3 sm:px-4 py-3 hidden md:table-cell"},ce={class:"px-3 sm:px-4 py-3 hidden lg:table-cell"},pe={class:"px-3 sm:px-4 py-3 text-center hidden md:table-cell"},me=["src","onClick"],ue={class:"px-3 sm:px-4 py-3 text-center font-bold text-[#FF2D2D] hidden sm:table-cell"},xe={class:"px-3 sm:px-4 py-3 text-center flex flex-col sm:flex-row justify-center gap-2 sm:gap-3"},ge=["onClick"],be=["onClick"],fe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 px-4"},ye={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},he={class:"mt-6 flex justify-end gap-3"},ve={key:1,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},we=["src"],De=V({__name:"OwnerAppointments",props:{appointments:{}},setup(F){const B=F;function P(o){v.post(`/owner/appointments/${o}/approve`)}const p=d(!1),m=d(""),f=d(null);function A(o){f.value=o,p.value=!0}function S(){f.value&&(v.post(`/owner/appointments/${f.value}/decline`,{reason:m.value}),p.value=!1,m.value="")}function w(o){return o.payment_proof?o.payment_proof.startsWith("http")||o.payment_proof.startsWith("/storage/")?o.payment_proof:`/storage/${o.payment_proof}`:"/images/hero-carwash.jpg"}function j(o){const t=o.target;t.src="/images/hero-carwash.jpg"}const y=d(!1),_=d("");function M(o){_.value=o,y.value=!0}const r=d("all"),u=d(""),x=d(""),D=$(()=>{let o=[...B.appointments];const t=new Date;let s=null,l=null;if(r.value==="today")s=new Date(t.toDateString()),l=new Date(s),l.setDate(l.getDate()+1);else if(r.value==="week"){const c=t.getDate()-t.getDay();s=new Date(t.setDate(c)),l=new Date(t.setDate(c+7))}else r.value==="month"?(s=new Date(t.getFullYear(),t.getMonth(),1),l=new Date(t.getFullYear(),t.getMonth()+1,1)):r.value==="custom"&&u.value&&x.value&&(s=new Date(u.value),l=new Date(x.value),l.setDate(l.getDate()+1));return s&&l&&(o=o.filter(c=>{const k=new Date(c.date_of_booking);return k>=s&&k<l})),o});function N(){v.visit("/owner/dashboard")}return(o,t)=>(a(),n(C,null,[I(T(W),{title:"Owner Appointments"}),e("div",O,[e("div",Y,[e("div",{class:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4"},[e("button",{onClick:N,class:"px-5 py-2 bg-[#002B5C] text-white font-semibold rounded-lg shadow-md hover:bg-[#FF2D2D] transition"}," ← Return to Dashboard "),t[6]||(t[6]=e("div",{class:"text-center sm:flex-1"},[e("h1",{class:"text-2xl sm:text-4xl font-extrabold text-[#002B5C] mb-1 sm:mb-2"}," Customer Appointments "),e("p",{class:"text-gray-500 text-sm sm:text-base"}," Manage and monitor all customer bookings efficiently ")],-1)),t[7]||(t[7]=e("div",{class:"hidden sm:block w-[150px]"},null,-1))]),e("div",L,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"Date Range",-1)),b(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},[...t[8]||(t[8]=[E('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[z,r.value]])]),r.value==="custom"?(a(),n("div",q,[t[10]||(t[10]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"From",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>u.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[h,u.value]])])):g("",!0),r.value==="custom"?(a(),n("div",G,[t[11]||(t[11]=e("label",{class:"block text-sm font-semibold text-gray-600 mb-1"},"To",-1)),b(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),class:"w-full px-4 py-2 sm:py-3 font-semibold text-[#182235] border rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none"},null,512),[[h,x.value]])])):g("",!0)]),D.value.length===0?(a(),n("div",H," No appointments found. ")):(a(),n("div",J,[e("table",K,[t[12]||(t[12]=e("thead",{class:"bg-[#002B5C] text-white"},[e("tr",null,[e("th",{class:"px-3 sm:px-4 py-3"},"Date"),e("th",{class:"px-3 sm:px-4 py-3"},"Time"),e("th",{class:"px-3 sm:px-4 py-3"},"Status"),e("th",{class:"px-3 sm:px-4 py-3 text-center"},"ID"),e("th",{class:"px-3 sm:px-4 py-3"},"Name"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Email"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Car Size"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Contact"),e("th",{class:"px-3 sm:px-4 py-3 hidden md:table-cell"},"Slot"),e("th",{class:"px-3 sm:px-4 py-3 hidden lg:table-cell"},"Created"),e("th",{class:"px-3 sm:px-4 py-3 text-center hidden md:table-cell"},"Payment Proof"),e("th",{class:"px-3 sm:px-4 py-3 text-center hidden sm:table-cell"},"Amount"),e("th",{class:"px-3 sm:px-4 py-3 text-center"},"Actions")])],-1)),e("tbody",Q,[(a(!0),n(C,null,R(D.value,(s,l)=>(a(),n("tr",{key:s.id,class:U([l%2===0?"bg-gray-50 hover:bg-gray-100":"hover:bg-gray-50","transition"])},[e("td",X,i(s.date_of_booking),1),e("td",Z,i(s.time_of_booking),1),e("td",ee,[s.status==="approved"?(a(),n("span",te,"Approved")):s.status==="declined"?(a(),n("span",se,"Declined")):(a(),n("span",oe,"Pending"))]),e("td",le,i(s.id),1),e("td",ne,i(s.name),1),e("td",ae,i(s.email||"Walk_IN"),1),e("td",ie,i(s.size_of_the_car),1),e("td",re,i(s.contact_no),1),e("td",de,i(s.slot_number),1),e("td",ce,i(s.created_at),1),e("td",pe,[e("img",{src:w(s),alt:"Payment Proof",class:"h-12 sm:h-16 w-12 sm:w-16 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:c=>M(w(s)),onError:j},null,40,me)]),e("td",ue,i(s.payment_amount??"Walk_IN"),1),e("td",xe,[e("button",{onClick:c=>P(s.id),class:"px-3 sm:px-4 py-1.5 sm:py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 shadow-sm transition"}," Approve ",8,ge),e("button",{onClick:c=>A(s.id),class:"px-3 sm:px-4 py-1.5 sm:py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 shadow-sm transition"}," Decline ",8,be)])],2))),128))])])]))])]),p.value?(a(),n("div",fe,[e("div",ye,[t[13]||(t[13]=e("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Appointment",-1)),t[14]||(t[14]=e("p",{class:"text-gray-600 mb-3"}," Please write the reason for declining this appointment: ",-1)),b(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[h,m.value]]),e("div",he,[e("button",{onClick:t[4]||(t[4]=s=>p.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),e("button",{onClick:S,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):g("",!0),y.value?(a(),n("div",ve,[e("img",{src:_.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,we),e("button",{onClick:t[5]||(t[5]=s=>y.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"}," ✕ ")])):g("",!0)],64))}});export{De as default};
