import{d as P,r as w,x as $,a as s,o as r,b as n,e,j as m,t as i,f as Q,u as c,F as j}from"./app-CZ1I8o-Q.js";import{d as D}from"./index-CvYeaicx.js";const B={key:0,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},R=["src"],S={class:"min-h-screen py-10 px-4 flex justify-center bg-[#F8FAFC]"},z={class:"w-full max-w-xl bg-white rounded-2xl shadow-lg p-6"},N={class:"text-3xl font-extrabold text-center text-[#002B5C] mb-6 tracking-tight"},E={class:"text-[#FF2D2D]"},A={key:0,class:"bg-green-100 text-green-800 p-3 rounded-lg mb-4 text-base font-medium"},T={key:1,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},V={key:2,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},G={class:"mt-2"},H=["href"],I={key:3,class:"space-y-4 mb-6"},M={class:"mb-6 text-center"},U={class:"overflow-x-auto"},J={class:"min-w-full border rounded"},K={class:"px-3 py-3 text-center"},L=["src"],O={class:"px-3 py-3 text-center"},W=["src"],X={class:"px-3 py-3 text-center"},Y=["src"],Z={class:"px-3 py-3 text-center"},ee=["src"],oe={class:"px-3 py-3 text-center"},te=["src"],se={class:"text-base text-[#182235] font-medium"},re={class:"text-base text-[#182235] font-medium"},ne={class:"text-base text-[#182235] font-medium"},ie={class:"text-base text-[#182235] font-medium"},le={class:"flex gap-4"},de={class:"text-base text-[#182235] font-medium"},ae={class:"text-base text-[#182235] font-medium"},pe={class:"text-base text-[#182235] font-medium"},me={key:0},ce={class:"text-base text-[#182235] font-medium"},be={key:0,class:"text-red-600 text-sm mt-1"},ue=["disabled"],fe={key:0},ge={key:1},ye=P({__name:"PaymentPage",props:{shop:{},booking:{},pageTitle:{},error:{}},setup(C){var f,g,h,x,y,_,k,v;const l=C,b=w(!1),u=w(""),p=t=>{t&&(u.value=t,b.value=!0)},d=$({name:((f=l.booking)==null?void 0:f.name)??"",email:((g=l.booking)==null?void 0:g.email)??"",size_of_the_car:((h=l.booking)==null?void 0:h.size_of_the_car)??"",contact_no:((x=l.booking)==null?void 0:x.contact_no)??"",date_of_booking:((y=l.booking)==null?void 0:y.date_of_booking)??"",time_of_booking:((_=l.booking)==null?void 0:_.time_of_booking)??"",slot_number:((k=l.booking)==null?void 0:k.slot_number)??1,payment_amount:50,payment_proof:null,services_offered:((v=l.booking)==null?void 0:v.services_offered)??""}),q=t=>{var a;const o=t.target;(a=o==null?void 0:o.files)!=null&&a[0]&&(d.payment_proof=o.files[0])},F=()=>{if(!d.payment_proof){d.errors.payment_proof="Please upload payment proof (screenshot).";return}d.post(`/customer/book/${l.shop.id}/confirm`,{forceFormData:!0,onSuccess:()=>D.Inertia.visit("/settings/appearance"),onError:t=>console.error("Payment submission error:",t)})};return(t,o)=>(r(),s(j,null,[b.value?(r(),s("div",B,[e("img",{src:u.value,alt:"QR Code Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,R),e("button",{onClick:o[0]||(o[0]=a=>b.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"}," âœ• ")])):n("",!0),e("div",S,[e("div",z,[e("h1",N,[o[6]||(o[6]=m(" Confirm & Pay for ",-1)),e("span",E,i(t.shop.name),1)]),t.$page.props.flash.success?(r(),s("div",A,i(t.$page.props.flash.success),1)):n("",!0),t.$page.props.flash.error?(r(),s("div",T,i(t.$page.props.flash.error),1)):n("",!0),t.error||!t.booking?(r(),s("div",V,[m(i(t.error||"Please submit booking details to proceed with payment.")+" ",1),e("div",G,[e("a",{href:`/shop/${t.shop.id}/book`,class:"text-[#002B5C] underline font-semibold"},"Go to Booking Form",8,H)])])):n("",!0),t.booking?(r(),s("div",I,[e("div",M,[o[8]||(o[8]=e("h2",{class:"text-base font-bold text-[#182235] mb-2"},[m(" Scan to Pay "),e("span",{class:"font-normal text-gray-500"},"(QR Codes)")],-1)),e("div",U,[e("table",J,[o[7]||(o[7]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-3 py-2 text-center"},"QR Code 1"),e("th",{class:"px-3 py-2 text-center"},"QR Code 2"),e("th",{class:"px-3 py-2 text-center"},"QR Code 3"),e("th",{class:"px-3 py-2 text-center"},"QR Code 4"),e("th",{class:"px-3 py-2 text-center"},"QR Code 5")])],-1)),e("tbody",null,[e("tr",null,[e("td",K,[t.shop.qr_code?(r(),s("img",{key:0,src:t.shop.qr_code,class:"h-12 w-12 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:o[1]||(o[1]=a=>p(t.shop.qr_code))},null,8,L)):n("",!0)]),e("td",O,[t.shop.qr_code2?(r(),s("img",{key:0,src:t.shop.qr_code2,class:"h-12 w-12 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:o[2]||(o[2]=a=>p(t.shop.qr_code2))},null,8,W)):n("",!0)]),e("td",X,[t.shop.qr_code3?(r(),s("img",{key:0,src:t.shop.qr_code3,class:"h-12 w-12 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:o[3]||(o[3]=a=>p(t.shop.qr_code3))},null,8,Y)):n("",!0)]),e("td",Z,[t.shop.qr_code4?(r(),s("img",{key:0,src:t.shop.qr_code4,class:"h-12 w-12 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:o[4]||(o[4]=a=>p(t.shop.qr_code4))},null,8,ee)):n("",!0)]),e("td",oe,[t.shop.qr_code5?(r(),s("img",{key:0,src:t.shop.qr_code5,class:"h-12 w-12 object-cover rounded border mx-auto cursor-pointer hover:scale-105 transition",onClick:o[5]||(o[5]=a=>p(t.shop.qr_code5))},null,8,te)):n("",!0)])])])])]),o[9]||(o[9]=e("p",{class:"text-sm text-gray-500 mt-2"},"Click a QR code to preview.",-1))]),e("div",null,[o[10]||(o[10]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Name:",-1)),e("p",se,i(t.booking.name),1)]),e("div",null,[o[11]||(o[11]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Email:",-1)),e("p",re,i(t.booking.email),1)]),e("div",null,[o[12]||(o[12]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Size:",-1)),e("p",ne,i(t.booking.size_of_the_car),1)]),e("div",null,[o[13]||(o[13]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Contact:",-1)),e("p",ie,i(t.booking.contact_no),1)]),e("div",le,[e("div",null,[o[14]||(o[14]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Date:",-1)),e("p",de,i(t.booking.date_of_booking),1)]),e("div",null,[o[15]||(o[15]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Time:",-1)),e("p",ae,i(t.booking.time_of_booking),1)])]),e("div",null,[o[16]||(o[16]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Slot Number:",-1)),e("p",pe,i(t.booking.slot_number),1)]),t.booking.services_offered?(r(),s("div",me,[o[17]||(o[17]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Service offered:",-1)),e("p",ce,i(t.booking.services_offered),1)])):n("",!0),o[18]||(o[18]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-700"},"Payment Amount:"),e("p",{class:"text-base text-[#FF2D2D] font-bold"},"PHP 50.00")],-1))])):n("",!0),t.booking?(r(),s("form",{key:4,onSubmit:Q(F,["prevent"]),class:"space-y-4",enctype:"multipart/form-data"},[e("div",null,[o[19]||(o[19]=e("label",{class:"block text-base font-bold text-[#182235] mb-2"},[m(" Upload Payment Proof: "),e("span",{class:"font-normal text-gray-500"},"(screenshot of receipt)")],-1)),e("input",{onChange:q,type:"file",accept:"image/jpeg,image/png",class:"w-full mt-1 p-2 border-2 border-[#182235] bg-[#F8FAFC] text-[#182235] rounded-lg font-semibold cursor-pointer",required:""},null,32),c(d).errors.payment_proof?(r(),s("div",be,i(c(d).errors.payment_proof),1)):n("",!0)]),e("button",{type:"submit",class:"w-full bg-[#FF2D2D] text-white py-2 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50",disabled:c(d).processing},[c(d).processing?(r(),s("span",fe,"Booking...")):(r(),s("span",ge,"Confirm Booking"))],8,ue)],32)):n("",!0)])])],64))}});export{ye as default};
