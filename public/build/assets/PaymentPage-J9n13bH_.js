import{d as P,r as S,x as $,c as r,o as i,a as e,e as l,j as d,t as n,f as B,u as m}from"./app-xeZnK95H.js";import{d as D}from"./index-C6XMn_ub.js";const q={class:"min-h-screen py-10 px-4 flex justify-center bg-[#F8FAFC]"},E={class:"w-full max-w-xl bg-white rounded-2xl shadow-lg p-6"},N={class:"text-3xl font-extrabold text-center text-[#002B5C] mb-6 tracking-tight"},j={class:"text-[#FF2D2D]"},z={key:0,class:"bg-green-100 text-green-800 p-3 rounded-lg mb-4 text-base font-medium"},A={key:1,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},Q={key:2,class:"bg-red-100 text-red-800 p-3 rounded-lg mb-4 text-base font-medium"},R={class:"mt-2"},T=["href"],V={key:3,class:"space-y-4 mb-6"},I={class:"mb-6 text-center"},U=["src"],G={class:"text-base text-[#182235] font-medium"},H={class:"text-base text-[#182235] font-medium"},M={class:"text-base text-[#182235] font-medium"},W={class:"text-base text-[#182235] font-medium"},J={class:"flex gap-4"},K={class:"text-base text-[#182235] font-medium"},L={class:"text-base text-[#182235] font-medium"},O={class:"text-base text-[#182235] font-medium"},X={key:0},Y={class:"text-base text-[#182235] font-medium"},Z={key:0,class:"text-red-600 text-sm mt-1"},ee=["disabled"],te={key:0},oe={key:1},re=P({__name:"PaymentPage",props:{shop:{},booking:{},pageTitle:{},error:{}},setup(k){var f,b,g,c,u,x,h,_;const s=k,p="https://washwisecapstone2-production.up.railway.app",v=S(s.shop.qr_code?s.shop.qr_code.startsWith("http")?s.shop.qr_code:`${p}/storage/${s.shop.qr_code}`:`${p}/images/default-qr.png`),a=$({name:((f=s.booking)==null?void 0:f.name)??"",email:((b=s.booking)==null?void 0:b.email)??"",size_of_the_car:((g=s.booking)==null?void 0:g.size_of_the_car)??"",contact_no:((c=s.booking)==null?void 0:c.contact_no)??"",date_of_booking:((u=s.booking)==null?void 0:u.date_of_booking)??"",time_of_booking:((x=s.booking)==null?void 0:x.time_of_booking)??"",slot_number:((h=s.booking)==null?void 0:h.slot_number)??1,payment_amount:50,payment_proof:null,services_offered:((_=s.booking)==null?void 0:_.services_offered)??""}),w=o=>{const t=o.target;t&&(t.src=`${p}/images/default-qr.png`)},F=o=>{var y;const t=o.target;(y=t==null?void 0:t.files)!=null&&y[0]&&(a.payment_proof=t.files[0])},C=()=>{if(!a.payment_proof){a.errors.payment_proof="Please upload payment proof (screenshot).";return}a.post(`/customer/book/${s.shop.id}/confirm`,{forceFormData:!0,onSuccess:()=>D.Inertia.visit("/settings/appearance"),onError:o=>console.error("Payment submission error:",o)})};return(o,t)=>(i(),r("div",q,[e("div",E,[e("h1",N,[t[0]||(t[0]=d("Confirm & Pay for ",-1)),e("span",j,n(o.shop.name),1)]),o.$page.props.flash.success?(i(),r("div",z,n(o.$page.props.flash.success),1)):l("",!0),o.$page.props.flash.error?(i(),r("div",A,n(o.$page.props.flash.error),1)):l("",!0),o.error||!o.booking?(i(),r("div",Q,[d(n(o.error||"Please submit booking details to proceed with payment.")+" ",1),e("div",R,[e("a",{href:`/shop/${o.shop.id}/book`,class:"text-[#002B5C] underline font-semibold"},"Go to Booking Form",8,T)])])):l("",!0),o.booking?(i(),r("div",V,[e("div",I,[t[1]||(t[1]=e("h2",{class:"text-base font-bold text-[#182235] mb-2"},[d("Scan to Pay "),e("span",{class:"font-normal text-gray-500"},"(QR Code)")],-1)),e("img",{src:v.value,onError:w,alt:"Shop QR Code",class:"mx-auto h-40 w-40 object-contain rounded-lg border border-gray-200 bg-white"},null,40,U),t[2]||(t[2]=e("p",{class:"text-sm text-gray-500 mt-2"},"Scan this QR with your payment app, then upload a screenshot as proof of payment.",-1))]),e("div",null,[t[3]||(t[3]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Name:",-1)),e("p",G,n(o.booking.name),1)]),e("div",null,[t[4]||(t[4]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Email:",-1)),e("p",H,n(o.booking.email),1)]),e("div",null,[t[5]||(t[5]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Size:",-1)),e("p",M,n(o.booking.size_of_the_car),1)]),e("div",null,[t[6]||(t[6]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Contact:",-1)),e("p",W,n(o.booking.contact_no),1)]),e("div",J,[e("div",null,[t[7]||(t[7]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Date:",-1)),e("p",K,n(o.booking.date_of_booking),1)]),e("div",null,[t[8]||(t[8]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Time:",-1)),e("p",L,n(o.booking.time_of_booking),1)])]),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Slot Number:",-1)),e("p",O,n(o.booking.slot_number),1)]),o.booking.services_offered?(i(),r("div",X,[t[10]||(t[10]=e("h3",{class:"text-sm font-semibold text-gray-700"},"Service offered:",-1)),e("p",Y,n(o.booking.services_offered),1)])):l("",!0),t[11]||(t[11]=e("div",null,[e("h3",{class:"text-sm font-semibold text-gray-700"},"Payment Amount:"),e("p",{class:"text-base text-[#FF2D2D] font-bold"},"PHP 50.00")],-1))])):l("",!0),o.booking?(i(),r("form",{key:4,onSubmit:B(C,["prevent"]),class:"space-y-4",enctype:"multipart/form-data"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-base font-bold text-[#182235] mb-2"},[d(" Upload Payment Proofs "),e("span",{class:"font-normal text-gray-500"},"(screenshot of receipt)")],-1)),e("input",{onChange:F,type:"file",accept:"image/jpeg,image/png",class:"w-full mt-1 p-2 border-2 border-[#182235] bg-[#F8FAFC] text-[#182235] rounded-lg font-semibold cursor-pointer",required:""},null,32),m(a).errors.payment_proof?(i(),r("div",Z,n(m(a).errors.payment_proof),1)):l("",!0)]),e("button",{type:"submit",class:"w-full bg-[#FF2D2D] text-white py-2 rounded-lg font-bold text-lg hover:opacity-90 transition disabled:opacity-50",disabled:m(a).processing},[m(a).processing?(i(),r("span",te,"Booking...")):(i(),r("span",oe,"Confirm Booking"))],8,ee)],32)):l("",!0)])]))}});export{re as default};
