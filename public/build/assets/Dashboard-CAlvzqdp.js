import{d as $,r as d,c as E,a as l,o as r,l as L,e,b as w,u as m,m as z,t as u,n as k,f as p,g as C,h as M,F as v,i as D,p as V}from"./app-B8yvHsoB.js";import{d as n}from"./index-FPI-tLFA.js";const W={class:"w-full bg-white flex items-center justify-between px-4 py-3 shadow-md sticky top-0 z-40"},O={class:"hidden sm:block text-sm font-semibold text-gray-800"},P={class:"flex min-h-screen bg-gradient-to-br from-white via-blue-50 to-[#002B5C]"},R={class:"space-y-3 p-4"},A={class:"flex-1 p-4 sm:p-8"},U={class:"mt-6 bg-white/80 backdrop-blur-lg rounded-xl shadow-md p-4 border border-gray-100"},G={class:"relative"},H=["value"],T={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},Y=["src"],q={class:"text-lg font-semibold text-gray-800"},J={class:"text-sm text-gray-500 mb-2"},K=["onClick"],Q={key:1,disabled:"",class:"w-full sm:w-auto px-5 py-2 rounded-full bg-gray-400 text-white font-medium shadow cursor-not-allowed"},X=["href"],Z={key:1,class:"text-gray-500 text-center mt-8"},ee={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4"},te={class:"bg-white rounded-xl shadow-lg max-w-md w-full p-6"},oe={class:"flex items-start mb-4"},ne=$({__name:"Dashboard",props:{shops:{},districts:{},auth:{}},setup(F){const c=d(!1);function x(){c.value=!c.value}const a=F,g=d("all"),B=()=>{n.Inertia.post("/logout",{},{onSuccess:()=>n.Inertia.get("/login"),onError:s=>{console.error("Logout error:",s),alert("Failed to log out.")}})},f=d(!1),b=d(null),i=d(!1),_=s=>{if(s.status==="closed"){alert("üö´ Sorry, this shop is currently closed.");return}if(!a.auth.user){n.Inertia.get("/login");return}b.value=s,f.value=!0,i.value=!1},I=()=>{if(!i.value){alert("‚ö†Ô∏è Please check the agreement box before confirming your booking.");return}b.value&&(n.Inertia.get(`/customer/book/${b.value.id}`),f.value=!1)},S=()=>{f.value=!1,b.value=null,i.value=!1},h=E(()=>g.value==="all"?a.shops:a.shops.filter(s=>s.district==g.value));function j(s){return s.logo?s.logo.startsWith("http")?s.logo:`/storage/${s.logo}`:"/images/default-carwash.png"}function N(s){const t=s.target;t&&(t.src="/logos/default-carwash.png")}return(s,t)=>{var y;return r(),l(v,null,[L(m(z),{title:"Customer Dashboard"}),e("header",W,[e("button",{onClick:x,class:"flex flex-col justify-between w-6 h-5 focus:outline-none hover:opacity-80 transition"},[...t[5]||(t[5]=[e("span",{class:"block h-0.5 bg-gray-800 rounded"},null,-1),e("span",{class:"block h-0.5 bg-gray-800 rounded"},null,-1),e("span",{class:"block h-0.5 bg-gray-800 rounded"},null,-1)])]),t[6]||(t[6]=e("div",{class:"flex items-center gap-2"},[e("img",{src:"/images/washwiselogo2.png",alt:"WashWise Logo",class:"h-10 w-auto object-contain"})],-1)),e("span",O,u(((y=a.auth.user)==null?void 0:y.name)||"Guest"),1)]),e("div",P,[c.value?(r(),l("div",{key:0,onClick:x,class:"fixed inset-0 bg-black bg-opacity-40 z-40 sm:hidden"})):w("",!0),e("aside",{class:k(["fixed top-0 left-0 h-full w-64 bg-gradient-to-b from-[#182235] to-[#0f172a] text-white shadow-lg z-50 transform transition-transform duration-300",c.value?"translate-x-0":"-translate-x-full"])},[e("div",{class:"flex justify-between items-center p-4 border-b border-gray-700"},[t[7]||(t[7]=e("h2",{class:"text-lg font-bold"},"Menu",-1)),e("button",{onClick:x,class:"text-gray-400 hover:text-red-500 text-2xl"},"√ó")]),e("nav",R,[e("button",{onClick:t[0]||(t[0]=p(o=>m(n.Inertia).get("/settings/profile"),["prevent"])),class:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 transition font-bold"},"‚öôÔ∏è Edit Profile"),e("button",{onClick:t[1]||(t[1]=p(o=>m(n.Inertia).get("/settings/password"),["prevent"])),class:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 transition font-bold"},"üîí Password"),e("button",{onClick:t[2]||(t[2]=p(o=>m(n.Inertia).get("/settings/appearance"),["prevent"])),class:"w-full text-left px-3 py-2 rounded-lg hover:bg-white/10 transition font-bold"},"üí≥ Transaction History"),e("button",{onClick:B,class:"w-full text-left px-3 py-2 rounded-lg text-red-500 hover:bg-red-500/10 transition font-bold"},"üö™ Log Out")])],2),e("main",A,[t[11]||(t[11]=e("h1",{class:"text-2xl sm:text-3xl font-extrabold text-gray-900 text-center"},"Available Car Wash Services",-1)),e("div",U,[t[10]||(t[10]=e("label",{for:"district",class:"block text-sm font-medium text-gray-900 mb-1"},"Nearby",-1)),e("div",G,[C(e("select",{id:"district","onUpdate:modelValue":t[3]||(t[3]=o=>g.value=o),class:"block w-full appearance-none rounded-xl border border-gray-300 bg-gradient-to-r from-white via-gray-50 to-white px-4 py-2 pr-10 text-gray-900 shadow focus:border-[#FF2D2D] focus:ring-2 focus:ring-[#FF2D2D] text-sm transition"},[t[8]||(t[8]=e("option",{value:"all"},"All Districts",-1)),(r(!0),l(v,null,D(a.districts,o=>(r(),l("option",{key:o,value:o},"District "+u(o),9,H))),128))],512),[[M,g.value]]),t[9]||(t[9]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),h.value.length>0?(r(),l("div",T,[(r(!0),l(v,null,D(h.value,o=>(r(),l("div",{key:o.id,class:"bg-white shadow-md rounded-xl p-4 flex flex-col items-center text-center border border-gray-200 hover:shadow-xl hover:-translate-y-1 transition"},[e("img",{src:j(o),alt:"Car Wash Logo",class:"h-20 w-20 object-contain mb-4",onError:N},null,40,Y),e("h3",q,u(o.name),1),e("p",J,u(o.address),1),e("p",{class:k(["text-xs font-semibold mb-4",o.status==="open"?"text-green-600":"text-red-600"])},u(o.status==="open"?"üü¢ Open":"üî¥ Closed"),3),o.status==="open"?(r(),l("button",{key:0,onClick:p(se=>_(o),["prevent"]),class:"w-full sm:w-auto px-5 py-2 rounded-full bg-[#002B5C] text-white font-medium shadow hover:bg-[#FF2D2D] hover:scale-105 transition"}," Book Now ",8,K)):(r(),l("button",Q," üö´ Closed ")),e("a",{href:`/customer/feedback/${o.id}`,class:"mt-2 w-full sm:w-auto px-5 py-2 rounded-full bg-[#FF2D2D] text-white font-medium shadow hover:bg-[#002B5C] hover:scale-105 transition"}," Feedback ",8,X)]))),128))])):(r(),l("p",Z,"No approved shops available."))])]),f.value?(r(),l("div",ee,[e("div",te,[t[13]||(t[13]=e("h2",{class:"text-lg font-bold text-gray-800 mb-4"},"Booking Reminder Notice",-1)),t[14]||(t[14]=e("ul",{class:"list-disc list-inside text-sm text-gray-700 space-y-2 mb-4"},[e("li",null,"Please make sure to arrive on time for your selected schedule to secure your slot."),e("li",null,"If you are unable to come, kindly note that the reservation/down payment is non-refundable."),e("li",null,"If you arrive late, accommodation will depend on staff availability."),e("li",null,"In case of unforeseen events (e.g., heavy rain, technical issues, or emergencies), your appointment may be rescheduled to the next available slot. You may also rebook your preferred schedule once the system reopens for booking.")],-1)),e("div",oe,[C(e("input",{id:"agree",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=o=>i.value=o),class:"mt-1 w-4 h-4 text-[#002B5C] border-gray-300 rounded focus:ring-[#FF2D2D]"},null,512),[[V,i.value]]),t[12]||(t[12]=e("label",{for:"agree",class:"ml-2 text-sm text-gray-700 font-semibold"}," By clicking ‚ÄúConfirm Booking‚Äù, you agree to these conditions. ",-1))]),e("div",{class:"flex flex-col sm:flex-row justify-end gap-3"},[e("button",{onClick:S,class:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 w-full sm:w-auto"},"Cancel"),e("button",{onClick:I,class:"px-4 py-2 bg-[#002B5C] text-white rounded-lg hover:bg-[#FF2D2D] w-full sm:w-auto"},"Confirm Booking")])])])):w("",!0)],64)}}});export{ne as default};
