import{d as I,r as d,b as T,c as n,o as a,l as W,a as e,e as x,u as z,m as E,g as f,h as R,s as U,v as y,F as h,i as F,W as _,t as r,n as O}from"./app-DEtYk_-D.js";const Y={class:"min-h-screen bg-gradient-to-br from-[#e3f2fd] via-[#ffffff] to-[#e1f5fe] py-10 px-6 flex flex-col items-center"},L={class:"w-full max-w-7xl backdrop-blur-lg bg-white/90 border border-gray-200 shadow-2xl rounded-3xl p-8 sm:p-10 relative transition-all"},q={class:"mb-10 p-8 bg-white border border-gray-200 rounded-2xl shadow-md grid grid-cols-1 sm:grid-cols-3 gap-6 transition-all duration-300"},G={key:0},H={key:1},J={key:0,class:"text-gray-500 text-lg text-center py-16"},K={key:1,class:"overflow-x-auto rounded-2xl shadow-lg border border-gray-200 bg-white/90 backdrop-blur-sm"},Q={class:"w-full border-collapse text-sm sm:text-base"},X={class:"bg-gradient-to-r from-[#002B5C] to-[#00509E] text-white"},Z={class:"text-[#182235] font-medium divide-y divide-gray-200"},ee={class:"px-4 py-3"},te={class:"px-4 py-3"},oe={class:"px-4 py-3"},se={key:0,class:"px-2 py-1 bg-green-100 text-green-700 font-semibold rounded-lg text-xs sm:text-sm"},ne={key:1,class:"px-2 py-1 bg-red-100 text-red-700 font-semibold rounded-lg text-xs sm:text-sm"},ae={key:2,class:"px-2 py-1 bg-gray-200 text-gray-700 font-semibold rounded-lg text-xs sm:text-sm"},le={class:"px-4 py-3 text-center"},re={class:"px-4 py-3"},ie={class:"px-4 py-3"},de={class:"px-4 py-3"},ue={class:"px-4 py-3"},ce={class:"px-4 py-3"},ge={class:"px-4 py-3"},me={class:"px-4 py-3 text-center"},pe=["src","onClick"],xe={class:"px-4 py-3 text-center font-bold text-[#FF2D2D]"},fe={class:"px-4 py-3 text-center flex justify-center gap-3"},be=["onClick"],ve=["onClick"],ye={key:0,class:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50"},he={class:"bg-white w-full max-w-md rounded-2xl shadow-xl p-6 relative"},_e={class:"mt-6 flex justify-end gap-3"},we={key:1,class:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50"},ke=["src"],Ce=I({__name:"OwnerAppointments",props:{appointments:{}},setup(B){const P=B;function A(s){_.post(`/owner/appointments/${s}/approve`)}const c=d(!1),g=d(""),b=d(null);function S(s){b.value=s,c.value=!0}function M(){b.value&&(_.post(`/owner/appointments/${b.value}/decline`,{reason:g.value}),c.value=!1,g.value="")}function w(s){return s.payment_proof?s.payment_proof.startsWith("http")||s.payment_proof.startsWith("/storage/")?s.payment_proof:`/storage/${s.payment_proof}`:"/images/hero-carwash.jpg"}function N(s){const t=s.target;t.src="/images/hero-carwash.jpg"}const v=d(!1),k=d("");function V(s){k.value=s,v.value=!0}const i=d("all"),m=d(""),p=d(""),D=T(()=>{let s=[...P.appointments];const t=new Date;let o=null,l=null;if(i.value==="today")o=new Date(t.toDateString()),l=new Date(o),l.setDate(l.getDate()+1);else if(i.value==="week"){const u=t.getDate()-t.getDay();o=new Date(t.setDate(u)),l=new Date(t.setDate(u+7))}else i.value==="month"?(o=new Date(t.getFullYear(),t.getMonth(),1),l=new Date(t.getFullYear(),t.getMonth()+1,1)):i.value==="custom"&&m.value&&p.value&&(o=new Date(m.value),l=new Date(p.value),l.setDate(l.getDate()+1));return o&&l&&(s=s.filter(u=>{const C=new Date(u.date_of_booking);return C>=o&&C<l})),s});function $(){_.visit("/owner/dashboard")}const j=[{text:"Date",value:"date_of_booking"},{text:"Time",value:"time_of_booking"},{text:"Status",value:"status"},{text:"ID",value:"id"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Car Size",value:"size_of_the_car"},{text:"Contact",value:"contact_no"},{text:"Slot",value:"slot_number"},{text:"Created",value:"created_at"},{text:"Payment Proof",value:"payment_proof"},{text:"Amount",value:"payment_amount"},{text:"Actions",value:"actions"}];return(s,t)=>(a(),n(h,null,[W(z(E),{title:"Owner Appointments"}),e("div",Y,[e("div",L,[e("div",{class:"absolute top-6 left-6"},[e("button",{onClick:$,class:"px-5 py-2 bg-[#002B5C] text-white font-semibold rounded-xl shadow-md hover:bg-[#FF2D2D] transition-all duration-300 transform hover:-translate-y-0.5"}," ← Return to Dashboard ")]),t[10]||(t[10]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl sm:text-5xl font-extrabold text-[#002B5C] mb-3 tracking-tight drop-shadow-sm"}," Customer Appointments "),e("p",{class:"text-gray-600 text-lg"},"Monitor and manage all customer bookings effortlessly")],-1)),e("div",q,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"Date Range",-1)),f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full px-4 py-3 font-medium text-[#182235] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none bg-gray-50 hover:bg-white transition"},[...t[6]||(t[6]=[U('<option value="all">All</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom</option>',5)])],512),[[R,i.value]])]),i.value==="custom"?(a(),n("div",G,[t[8]||(t[8]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"From",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>m.value=o),class:"w-full px-4 py-3 font-medium text-[#182235] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none bg-gray-50 hover:bg-white transition"},null,512),[[y,m.value]])])):x("",!0),i.value==="custom"?(a(),n("div",H,[t[9]||(t[9]=e("label",{class:"block text-sm font-bold text-gray-700 mb-2"},"To",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o),class:"w-full px-4 py-3 font-medium text-[#182235] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#002B5C] focus:outline-none bg-gray-50 hover:bg-white transition"},null,512),[[y,p.value]])])):x("",!0)]),D.value.length===0?(a(),n("div",J," No appointments found. ")):(a(),n("div",K,[e("table",Q,[e("thead",X,[e("tr",null,[(a(),n(h,null,F(j,o=>e("th",{key:o.value,class:"px-4 py-3 text-left font-semibold uppercase tracking-wide"},r(o.text),1)),64))])]),e("tbody",Z,[(a(!0),n(h,null,F(D.value,(o,l)=>(a(),n("tr",{key:o.id,class:O([l%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100","transition-colors duration-200"])},[e("td",ee,r(o.date_of_booking),1),e("td",te,r(o.time_of_booking),1),e("td",oe,[o.status==="approved"?(a(),n("span",se,"Approved")):o.status==="declined"?(a(),n("span",ne,"Declined")):(a(),n("span",ae,"Pending"))]),e("td",le,r(o.id),1),e("td",re,r(o.name),1),e("td",ie,r(o.email||"Walk_IN"),1),e("td",de,r(o.size_of_the_car),1),e("td",ue,r(o.contact_no),1),e("td",ce,r(o.slot_number),1),e("td",ge,r(o.created_at),1),e("td",me,[e("img",{src:w(o),alt:"Payment Proof",class:"h-16 w-16 object-cover rounded-lg border mx-auto cursor-pointer hover:scale-110 transition-transform duration-200",onClick:u=>V(w(o)),onError:N},null,40,pe)]),e("td",xe,r(o.payment_amount??"Walk_IN"),1),e("td",fe,[e("button",{onClick:u=>A(o.id),class:"px-4 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 shadow-md transition transform hover:-translate-y-0.5"}," Approve ",8,be),e("button",{onClick:u=>S(o.id),class:"px-4 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 shadow-md transition transform hover:-translate-y-0.5"}," Decline ",8,ve)])],2))),128))])])]))])]),c.value?(a(),n("div",ye,[e("div",he,[t[11]||(t[11]=e("h2",{class:"text-xl font-bold text-[#002B5C] mb-4"},"Decline Appointment",-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 mb-3"},"Please write the reason for declining this appointment:",-1)),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>g.value=o),rows:"4",placeholder:"Type reason here...",class:"w-full border border-gray-300 rounded-lg p-3 text-gray-800 focus:ring-2 focus:ring-[#FF2D2D] focus:outline-none"},null,512),[[y,g.value]]),e("div",_e,[e("button",{onClick:t[4]||(t[4]=o=>c.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400"}," Cancel "),e("button",{onClick:M,class:"px-5 py-2 bg-[#FF2D2D] text-white font-semibold rounded-lg hover:bg-[#E02626] transition"}," Send & Decline ")])])])):x("",!0),v.value?(a(),n("div",we,[e("img",{src:k.value,alt:"Preview",class:"max-h-[80vh] rounded-xl shadow-2xl border-4 border-white"},null,8,ke),e("button",{onClick:t[5]||(t[5]=o=>v.value=!1),class:"absolute top-6 right-8 text-white text-3xl font-bold"},"✕")])):x("",!0)],64))}});export{Ce as default};
